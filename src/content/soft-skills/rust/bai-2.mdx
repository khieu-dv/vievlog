# BÃ€I 2: CÃš PHÃP CÆ  Báº¢N VÃ€ BIáº¾N TRONG RUST

## ğŸ¯ Má»¤C TIÃŠU BÃ€I Há»ŒC

<div className="border-l-4 border-blue-500 pl-4 my-4">
<p className="text-lg font-medium">Náº¯m vá»¯ng cÃº phÃ¡p cÆ¡ báº£n vÃ  cÃ¡ch lÃ m viá»‡c vá»›i biáº¿n trong Rust</p>
</div>

Sau bÃ i há»c nÃ y, báº¡n sáº½ cÃ³ thá»ƒ:

- Hiá»ƒu cÃº phÃ¡p cÆ¡ báº£n cá»§a Rust
- Khai bÃ¡o vÃ  sá»­ dá»¥ng biáº¿n hiá»‡u quáº£
- PhÃ¢n biá»‡t giá»¯a immutable vÃ  mutable variables
- Sá»­ dá»¥ng shadowing vÃ  constants
- Hiá»ƒu vá» scope vÃ  lifetime cÆ¡ báº£n

---

## 1. CÃš PHÃP CÆ  Báº¢N

### 1.1 Comments (Ghi chÃº)

```mermaid
graph TD
    A[Comments trong Rust] --> B[Line Comments //]
    A --> C[Block Comments /* */]
    A --> D[Doc Comments ///]
    B --> E[DÃ nh cho ghi chÃº ngáº¯n]
    C --> F[DÃ nh cho ghi chÃº nhiá»u dÃ²ng]
    D --> G[Táº¡o documentation]
```

| Loáº¡i Comment  | CÃº phÃ¡p | Má»¥c Ä‘Ã­ch sá»­ dá»¥ng      |
| ------------- | ------- | --------------------- |
| Line Comment  | `//`    | Ghi chÃº má»™t dÃ²ng      |
| Block Comment | `/* */` | Ghi chÃº nhiá»u dÃ²ng    |
| Doc Comment   | `///`   | Táº¡o documentation     |
| Inner Doc     | `//!`   | Document module/crate |

### 1.2 Statements vs Expressions

<div className="grid grid-cols-1 md:grid-cols-2 gap-4 my-6">
<div className="border border-gray-300 rounded-lg p-4">
<h4 className="font-bold text-blue-600 mb-2">ğŸ“‹ Statements</h4>
<p>Thá»±c hiá»‡n action nhÆ°ng khÃ´ng tráº£ vá» giÃ¡ trá»‹</p>
<ul className="list-disc ml-4">
<li>Khai bÃ¡o biáº¿n</li>
<li>Function definitions</li>
<li>Káº¿t thÃºc báº±ng dáº¥u ;</li>
</ul>
</div>
<div className="border border-gray-300 rounded-lg p-4">
<h4 className="font-bold text-green-600 mb-2">ğŸ”„ Expressions</h4>
<p>Evaluate thÃ nh má»™t giÃ¡ trá»‹ cá»¥ thá»ƒ</p>
<ul className="list-disc ml-4">
<li>Math operations</li>
<li>Function calls</li>
<li>Block expressions</li>
</ul>
</div>
</div>

**VÃ­ dá»¥:**

```rust copy
fn main() {
    let x = 5; // Statement
    let y = {  // Expression block
        let a = 3;
        a + 1  // Expression (no semicolon)
    }; // y = 4
}
```

---

## 2. BIáº¾N TRONG RUST

### 2.1 Khai bÃ¡o biáº¿n vá»›i `let`

```mermaid
flowchart LR
    A[let keyword] --> B[variable name]
    B --> C[type annotation?]
    C --> D[= value]
    D --> E[;]

    F[let x] --> G[: i32] --> H[= 42] --> I[;]
```

**Äáº·c Ä‘iá»ƒm chÃ­nh cá»§a biáº¿n trong Rust:**

| Äáº·c Ä‘iá»ƒm                 | MÃ´ táº£                                     | VÃ­ dá»¥                 |
| ------------------------ | ----------------------------------------- | --------------------- |
| **Immutable by default** | Biáº¿n máº·c Ä‘á»‹nh khÃ´ng thá»ƒ thay Ä‘á»•i          | `let x = 5;`          |
| **Type inference**       | Rust tá»± suy luáº­n kiá»ƒu dá»¯ liá»‡u             | `let name = "Alice";` |
| **Explicit typing**      | CÃ³ thá»ƒ chá»‰ Ä‘á»‹nh kiá»ƒu rÃµ rÃ ng              | `let age: u32 = 25;`  |
| **Must be initialized**  | Biáº¿n pháº£i Ä‘Æ°á»£c khá»Ÿi táº¡o trÆ°á»›c khi sá»­ dá»¥ng | `let x = 10;` âœ…      |

### 2.2 Immutability (TÃ­nh báº¥t biáº¿n)

<div className="border border-red-200 rounded-lg p-4 my-4">
<h4 className="text-red-600 font-semibold">âš ï¸ LÆ°u Ã½ quan trá»ng</h4>
<p>Trong Rust, biáº¿n máº·c Ä‘á»‹nh lÃ  <strong>immutable</strong> (báº¥t biáº¿n). ÄÃ¢y lÃ  tÃ­nh nÄƒng báº£o máº­t giÃºp trÃ¡nh bugs.</p>
</div>

```rust copy
fn main() {
    let x = 5;
    println!("GiÃ¡ trá»‹ x: {}", x);
    // x = 6; // âŒ Lá»–I: cannot assign twice to immutable variable
}
```

### 2.3 Mutable Variables vá»›i `mut`

Äá»ƒ táº¡o biáº¿n cÃ³ thá»ƒ thay Ä‘á»•i, sá»­ dá»¥ng tá»« khÃ³a `mut`:

```rust copy
fn main() {
    let mut x = 5;
    println!("GiÃ¡ trá»‹ x ban Ä‘áº§u: {}", x);
    x = 6; // âœ… OK
    println!("GiÃ¡ trá»‹ x sau khi thay Ä‘á»•i: {}", x);
}
```

| Loáº¡i biáº¿n | CÃº phÃ¡p          | CÃ³ thá»ƒ thay Ä‘á»•i? | Use case         |
| --------- | ---------------- | ---------------- | ---------------- |
| Immutable | `let x = 5;`     | âŒ KhÃ´ng         | GiÃ¡ trá»‹ cá»‘ Ä‘á»‹nh  |
| Mutable   | `let mut x = 5;` | âœ… CÃ³            | GiÃ¡ trá»‹ thay Ä‘á»•i |

---

## 3. SHADOWING (CHE KHUáº¤T BIáº¾N)

### 3.1 KhÃ¡i niá»‡m Shadowing

```mermaid
graph TD
    A[Khai bÃ¡o biáº¿n láº§n 1] --> B[let x = 5]
    B --> C[Khai bÃ¡o biáº¿n láº§n 2]
    C --> D[let x = x + 1]
    D --> E[Biáº¿n má»›i che khuáº¥t biáº¿n cÅ©]
    E --> F[x = 6]
```

**Shadowing** cho phÃ©p tÃ¡i sá»­ dá»¥ng tÃªn biáº¿n vá»›i giÃ¡ trá»‹ hoáº·c kiá»ƒu má»›i:

```rust copy
fn main() {
    let x = 5;           // x = 5 (i32)
    let x = x + 1;       // x = 6 (i32) - shadowing
    let x = x * 2;       // x = 12 (i32) - shadowing again

    {
        let x = x + 3;   // x = 15 trong scope nÃ y
        println!("Trong scope: {}", x); // 15
    }

    println!("NgoÃ i scope: {}", x); // 12
}
```

### 3.2 Shadowing vs Mutation

<div className="overflow-x-auto">
<table className="min-w-full border border-gray-300">
<thead className="bg-gray-50">
<tr>
<th className="border border-gray-300 px-4 py-2 text-left">TiÃªu chÃ­</th>
<th className="border border-gray-300 px-4 py-2 text-left">Shadowing</th>
<th className="border border-gray-300 px-4 py-2 text-left">Mutation</th>
</tr>
</thead>
<tbody>
<tr>
<td className="border border-gray-300 px-4 py-2">Tá»« khÃ³a cáº§n thiáº¿t</td>
<td className="border border-gray-300 px-4 py-2"><code>let</code></td>
<td className="border border-gray-300 px-4 py-2"><code>mut</code></td>
</tr>
<tr>
<td className="border border-gray-300 px-4 py-2">Thay Ä‘á»•i kiá»ƒu dá»¯ liá»‡u</td>
<td className="border border-gray-300 px-4 py-2">âœ… ÄÆ°á»£c phÃ©p</td>
<td className="border border-gray-300 px-4 py-2">âŒ KhÃ´ng Ä‘Æ°á»£c</td>
</tr>
<tr>
<td className="border border-gray-300 px-4 py-2">Táº¡o biáº¿n má»›i</td>
<td className="border border-gray-300 px-4 py-2">âœ… CÃ³</td>
<td className="border border-gray-300 px-4 py-2">âŒ KhÃ´ng</td>
</tr>
<tr>
<td className="border border-gray-300 px-4 py-2">Performance</td>
<td className="border border-gray-300 px-4 py-2">Zero-cost</td>
<td className="border border-gray-300 px-4 py-2">Zero-cost</td>
</tr>
</tbody>
</table>
</div>

**VÃ­ dá»¥ shadowing vá»›i thay Ä‘á»•i kiá»ƒu:**

```rust copy
let spaces = "   ";      // &str type
let spaces = spaces.len(); // usize type - OK vá»›i shadowing!

// Vá»›i mut sáº½ lá»—i:
// let mut spaces = "   ";
// spaces = spaces.len(); // âŒ Lá»–I: khÃ¡c kiá»ƒu dá»¯ liá»‡u
```

---

## 4. CONSTANTS VÃ€ STATIC VARIABLES

### 4.1 Constants vá»›i `const`

```mermaid
graph LR
    A[const IDENTIFIER] --> B[: Type] --> C[= value] --> D[;]
    E[Compile-time known] --> F[Global scope]
    F --> G[Immutable forever]
```

| Äáº·c Ä‘iá»ƒm          | Constants         | Variables    |
| ----------------- | ----------------- | ------------ |
| Tá»« khÃ³a           | `const`           | `let`        |
| Pháº¡m vi           | ToÃ n cá»¥c          | Theo scope   |
| Thay Ä‘á»•i Ä‘Æ°á»£c     | âŒ KhÃ´ng bao giá»  | âœ… Vá»›i `mut` |
| Kiá»ƒu dá»¯ liá»‡u      | Báº¯t buá»™c chá»‰ Ä‘á»‹nh | CÃ³ thá»ƒ infer |
| Naming convention | UPPER_SNAKE_CASE  | snake_case   |

```rust copy
const MAX_POINTS: u32 = 100_000;
const PI: f64 = 3.14159;

fn main() {
    const PROGRAM_NAME: &str = "Rust Learner";
    println!("Max points: {}", MAX_POINTS);
}
```

### 4.2 Static Variables

```rust copy
static HELLO_WORLD: &str = "Hello, world!";
static mut COUNTER: usize = 0; // Unsafe Ä‘á»ƒ modify

fn main() {
    println!("{}", HELLO_WORLD);
}
```

---

## 5. SCOPE VÃ€ LIFETIME CÆ  Báº¢N

### 5.1 Variable Scope

```mermaid
graph TD
    A[main function scope] --> B[Outer scope]
    B --> C[Inner scope block]
    C --> D[Variables trong inner scope]
    D --> E[KhÃ´ng truy cáº­p Ä‘Æ°á»£c tá»« outer]
    B --> F[Variables trong outer scope]
    F --> G[Truy cáº­p Ä‘Æ°á»£c tá»« inner]
```

```rust copy
fn main() {
    let x = 5; // x cÃ³ scope trong main function

    {
        let y = 10; // y chá»‰ cÃ³ scope trong block nÃ y
        println!("x: {}, y: {}", x, y); // OK: cáº£ x vÃ  y Ä‘á»u accessible
    } // y bá»‹ dropped á»Ÿ Ä‘Ã¢y

    println!("x: {}", x); // OK: x váº«n trong scope
    // println!("y: {}", y); // âŒ Lá»–I: y Ä‘Ã£ out of scope
}
```

### 5.2 Variable Lifecycle

<div className="border border-blue-200 rounded-lg p-4 my-4">
<h4 className="text-blue-600 font-semibold">ğŸ”„ VÃ²ng Ä‘á»i cá»§a biáº¿n</h4>
<ol className="list-decimal ml-4">
<li><strong>Creation:</strong> Biáº¿n Ä‘Æ°á»£c táº¡o khi gáº·p <code>let</code></li>
<li><strong>Usage:</strong> Biáº¿n cÃ³ thá»ƒ Ä‘Æ°á»£c sá»­ dá»¥ng trong scope</li>
<li><strong>Drop:</strong> Biáº¿n tá»± Ä‘á»™ng bá»‹ giáº£i phÃ³ng khi ra khá»i scope</li>
</ol>
</div>

---

## 6. THá»°C HÃ€NH: CHÆ¯Æ NG TRÃŒNH TÃNH TOÃN

```rust copy
fn main() {
    // Constants
    const TAX_RATE: f64 = 0.1;
    const DISCOUNT_THRESHOLD: f64 = 1000.0;

    // Immutable variables
    let product_name = "Laptop";
    let base_price = 1200.0;

    // Mutable variable
    let mut final_price = base_price;

    // Apply discount if over threshold
    if base_price > DISCOUNT_THRESHOLD {
        final_price = final_price * 0.9; // 10% discount
        println!("Ãp dá»¥ng giáº£m giÃ¡ 10%");
    }

    // Calculate tax
    let tax_amount = final_price * TAX_RATE;
    final_price = final_price + tax_amount;

    // Shadowing for different representation
    let final_price = (final_price * 100.0).round() / 100.0; // Round to 2 decimals

    // Display results
    println!("Sáº£n pháº©m: {}", product_name);
    println!("GiÃ¡ gá»‘c: ${:.2}", base_price);
    println!("Thuáº¿: ${:.2}", tax_amount);
    println!("GiÃ¡ cuá»‘i: ${:.2}", final_price);
}
```

---

## 7. BÃ€I Táº¬P THá»°C HÃ€NH

### BÃ i táº­p 1: Temperature Converter

Viáº¿t chÆ°Æ¡ng trÃ¬nh chuyá»ƒn Ä‘á»•i nhiá»‡t Ä‘á»™ tá»« Celsius sang Fahrenheit vÃ  ngÆ°á»£c láº¡i.

### BÃ i táº­p 2: Simple Interest Calculator

Táº¡o chÆ°Æ¡ng trÃ¬nh tÃ­nh lÃ£i suáº¥t Ä‘Æ¡n giáº£n vá»›i cÃ¡c biáº¿n immutable vÃ  mutable.

### BÃ i táº­p 3: Variable Scope Explorer

Thá»±c hÃ nh vá»›i scopes khÃ¡c nhau vÃ  quan sÃ¡t lifetime cá»§a biáº¿n.

---

## ğŸ“š TÃ“M Táº®T BÃ€I Há»ŒC

<div className="grid grid-cols-1 md:grid-cols-2 gap-4 my-6">
<div className="border border-green-200 rounded-lg p-4">
<h4 className="text-green-600 font-semibold mb-2">âœ… ÄÃ£ há»c Ä‘Æ°á»£c</h4>
<ul className="list-disc ml-4 space-y-1">
<li>CÃº phÃ¡p cÆ¡ báº£n: comments, statements vs expressions</li>
<li>Khai bÃ¡o biáº¿n vá»›i <code>let</code></li>
<li>Immutability by default vÃ  sá»­ dá»¥ng <code>mut</code></li>
<li>Shadowing variables</li>
<li>Constants vÃ  static variables</li>
<li>Scope vÃ  variable lifetime</li>
</ul>
</div>
<div className="border border-blue-200 rounded-lg p-4">
<h4 className="text-blue-600 font-semibold mb-2">ğŸ¯ BÃ i tiáº¿p theo</h4>
<ul className="list-disc ml-4 space-y-1">
<li>Kiá»ƒu dá»¯ liá»‡u cÆ¡ báº£n (scalar types)</li>
<li>Compound types (tuples, arrays)</li>
<li>Type inference vÃ  type casting</li>
<li>Memory management cÆ¡ báº£n</li>
</ul>
</div>
</div>

---

## ğŸ”— TÃ€I LIá»†U THAM KHáº¢O

- [The Rust Programming Language - Variables](https://doc.rust-lang.org/book/ch03-01-variables-and-mutability.html)
- [Rust by Example - Variables](https://doc.rust-lang.org/rust-by-example/variable_bindings.html)
- [Rustlings Exercises](https://github.com/rust-lang/rustlings)
