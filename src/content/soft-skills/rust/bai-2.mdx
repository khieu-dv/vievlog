# B√ÄI 2: C√ö PH√ÅP C∆† B·∫¢N V√Ä BI·∫æN TRONG RUST

## üéØ M·ª§C TI√äU B√ÄI H·ªåC

<div className="border-l-4 border-blue-500 pl-4 my-4">
<p className="text-lg font-medium">N·∫Øm v·ªØng c√∫ ph√°p c∆° b·∫£n v√† c√°ch l√†m vi·ªác v·ªõi bi·∫øn trong Rust</p>
</div>

Sau b√†i h·ªçc n√†y, b·∫°n s·∫Ω c√≥ th·ªÉ:

- Hi·ªÉu c√∫ ph√°p c∆° b·∫£n c·ªßa Rust
- Khai b√°o v√† s·ª≠ d·ª•ng bi·∫øn hi·ªáu qu·∫£
- Ph√¢n bi·ªát gi·ªØa immutable v√† mutable variables
- S·ª≠ d·ª•ng shadowing v√† constants
- Hi·ªÉu v·ªÅ scope v√† lifetime c∆° b·∫£n

---

## 1. C√ö PH√ÅP C∆† B·∫¢N

### 1.1 Comments (Ghi ch√∫)

```mermaid
graph TD
    A[Comments trong Rust] --> B[Line Comments //]
    A --> C[Block Comments /* */]
    A --> D[Doc Comments ///]
    B --> E[D√†nh cho ghi ch√∫ ng·∫Øn]
    C --> F[D√†nh cho ghi ch√∫ nhi·ªÅu d√≤ng]
    D --> G[T·∫°o documentation]
```

| Lo·∫°i Comment  | C√∫ ph√°p | M·ª•c ƒë√≠ch s·ª≠ d·ª•ng      |
| ------------- | ------- | --------------------- |
| Line Comment  | `//`    | Ghi ch√∫ m·ªôt d√≤ng      |
| Block Comment | `/* */` | Ghi ch√∫ nhi·ªÅu d√≤ng    |
| Doc Comment   | `///`   | T·∫°o documentation     |
| Inner Doc     | `//!`   | Document module/crate |

### 1.2 Statements vs Expressions

<div className="grid grid-cols-1 md:grid-cols-2 gap-4 my-6">
<div className="border border-gray-300 rounded-lg p-4">
<h4 className="font-bold text-blue-600 mb-2">üìã Statements</h4>
<p>Th·ª±c hi·ªán action nh∆∞ng kh√¥ng tr·∫£ v·ªÅ gi√° tr·ªã</p>
<ul className="list-disc ml-4">
<li>Khai b√°o bi·∫øn</li>
<li>Function definitions</li>
<li>K·∫øt th√∫c b·∫±ng d·∫•u ;</li>
</ul>
</div>
<div className="border border-gray-300 rounded-lg p-4">
<h4 className="font-bold text-green-600 mb-2">üîÑ Expressions</h4>
<p>Evaluate th√†nh m·ªôt gi√° tr·ªã c·ª• th·ªÉ</p>
<ul className="list-disc ml-4">
<li>Math operations</li>
<li>Function calls</li>
<li>Block expressions</li>
</ul>
</div>
</div>

**V√≠ d·ª•:**

```rust copy
fn main() {
    let x = 5; // Statement
    let y = {  // Expression block
        let a = 3;
        a + 1  // Expression (no semicolon)
    }; // y = 4
}
```

---

## 2. BI·∫æN TRONG RUST

### 2.1 Khai b√°o bi·∫øn v·ªõi `let`

```mermaid
flowchart LR
    A[let keyword] --> B[variable name]
    B --> C[type annotation?]
    C --> D[= value]
    D --> E[;]

    F[let x] --> G[: i32] --> H[= 42] --> I[;]
```

**ƒê·∫∑c ƒëi·ªÉm ch√≠nh c·ªßa bi·∫øn trong Rust:**

| ƒê·∫∑c ƒëi·ªÉm                 | M√¥ t·∫£                                     | V√≠ d·ª•                 |
| ------------------------ | ----------------------------------------- | --------------------- |
| **Immutable by default** | Bi·∫øn m·∫∑c ƒë·ªãnh kh√¥ng th·ªÉ thay ƒë·ªïi          | `let x = 5;`          |
| **Type inference**       | Rust t·ª± suy lu·∫≠n ki·ªÉu d·ªØ li·ªáu             | `let name = "Alice";` |
| **Explicit typing**      | C√≥ th·ªÉ ch·ªâ ƒë·ªãnh ki·ªÉu r√µ r√†ng              | `let age: u32 = 25;`  |
| **Must be initialized**  | Bi·∫øn ph·∫£i ƒë∆∞·ª£c kh·ªüi t·∫°o tr∆∞·ªõc khi s·ª≠ d·ª•ng | `let x = 10;` ‚úÖ      |

### 2.2 Immutability (T√≠nh b·∫•t bi·∫øn)

<div className="border border-red-200 rounded-lg p-4 my-4">
<h4 className="text-red-600 font-semibold">‚ö†Ô∏è L∆∞u √Ω quan tr·ªçng</h4>
<p>Trong Rust, bi·∫øn m·∫∑c ƒë·ªãnh l√† <strong>immutable</strong> (b·∫•t bi·∫øn). ƒê√¢y l√† t√≠nh nƒÉng b·∫£o m·∫≠t gi√∫p tr√°nh bugs.</p>
</div>

```rust copy
fn main() {
    let x = 5;
    println!("Gi√° tr·ªã x: {}", x);
    // x = 6; // ‚ùå L·ªñI: cannot assign twice to immutable variable
}
```

### 2.3 Mutable Variables v·ªõi `mut`

ƒê·ªÉ t·∫°o bi·∫øn c√≥ th·ªÉ thay ƒë·ªïi, s·ª≠ d·ª•ng t·ª´ kh√≥a `mut`:

```rust copy
fn main() {
    let mut x = 5;
    println!("Gi√° tr·ªã x ban ƒë·∫ßu: {}", x);
    x = 6; // ‚úÖ OK
    println!("Gi√° tr·ªã x sau khi thay ƒë·ªïi: {}", x);
}
```

| Lo·∫°i bi·∫øn | C√∫ ph√°p          | C√≥ th·ªÉ thay ƒë·ªïi? | Use case         |
| --------- | ---------------- | ---------------- | ---------------- |
| Immutable | `let x = 5;`     | ‚ùå Kh√¥ng         | Gi√° tr·ªã c·ªë ƒë·ªãnh  |
| Mutable   | `let mut x = 5;` | ‚úÖ C√≥            | Gi√° tr·ªã thay ƒë·ªïi |

---

## 3. SHADOWING (CHE KHU·∫§T BI·∫æN)

### 3.1 Kh√°i ni·ªám Shadowing

```mermaid
graph TD
    A[Khai b√°o bi·∫øn l·∫ßn 1] --> B[let x = 5]
    B --> C[Khai b√°o bi·∫øn l·∫ßn 2]
    C --> D[let x = x + 1]
    D --> E[Bi·∫øn m·ªõi che khu·∫•t bi·∫øn c≈©]
    E --> F[x = 6]
```

**Shadowing** cho ph√©p t√°i s·ª≠ d·ª•ng t√™n bi·∫øn v·ªõi gi√° tr·ªã ho·∫∑c ki·ªÉu m·ªõi:

```rust copy
fn main() {
    let x = 5;           // x = 5 (i32)
    let x = x + 1;       // x = 6 (i32) - shadowing
    let x = x * 2;       // x = 12 (i32) - shadowing again

    {
        let x = x + 3;   // x = 15 trong scope n√†y
        println!("Trong scope: {}", x); // 15
    }

    println!("Ngo√†i scope: {}", x); // 12
}
```

### 3.2 Shadowing vs Mutation

<div className="overflow-x-auto">
<table className="min-w-full border border-gray-300">
<thead className="bg-gray-50">
<tr>
<th className="border border-gray-300 px-4 py-2 text-left">Ti√™u ch√≠</th>
<th className="border border-gray-300 px-4 py-2 text-left">Shadowing</th>
<th className="border border-gray-300 px-4 py-2 text-left">Mutation</th>
</tr>
</thead>
<tbody>
<tr>
<td className="border border-gray-300 px-4 py-2">T·ª´ kh√≥a c·∫ßn thi·∫øt</td>
<td className="border border-gray-300 px-4 py-2"><code>let</code></td>
<td className="border border-gray-300 px-4 py-2"><code>mut</code></td>
</tr>
<tr>
<td className="border border-gray-300 px-4 py-2">Thay ƒë·ªïi ki·ªÉu d·ªØ li·ªáu</td>
<td className="border border-gray-300 px-4 py-2">‚úÖ ƒê∆∞·ª£c ph√©p</td>
<td className="border border-gray-300 px-4 py-2">‚ùå Kh√¥ng ƒë∆∞·ª£c</td>
</tr>
<tr>
<td className="border border-gray-300 px-4 py-2">T·∫°o bi·∫øn m·ªõi</td>
<td className="border border-gray-300 px-4 py-2">‚úÖ C√≥</td>
<td className="border border-gray-300 px-4 py-2">‚ùå Kh√¥ng</td>
</tr>
<tr>
<td className="border border-gray-300 px-4 py-2">Performance</td>
<td className="border border-gray-300 px-4 py-2">Zero-cost</td>
<td className="border border-gray-300 px-4 py-2">Zero-cost</td>
</tr>
</tbody>
</table>
</div>

**V√≠ d·ª• shadowing v·ªõi thay ƒë·ªïi ki·ªÉu:**

```rust copy
let spaces = "   ";      // &str type
let spaces = spaces.len(); // usize type - OK v·ªõi shadowing!

// V·ªõi mut s·∫Ω l·ªói:
// let mut spaces = "   ";
// spaces = spaces.len(); // ‚ùå L·ªñI: kh√°c ki·ªÉu d·ªØ li·ªáu
```

---

## 4. CONSTANTS V√Ä STATIC VARIABLES

### 4.1 Constants v·ªõi `const`

```mermaid
graph LR
    A[const IDENTIFIER] --> B[: Type] --> C[= value] --> D[;]
    E[Compile-time known] --> F[Global scope]
    F --> G[Immutable forever]
```

| ƒê·∫∑c ƒëi·ªÉm          | Constants         | Variables    |
| ----------------- | ----------------- | ------------ |
| T·ª´ kh√≥a           | `const`           | `let`        |
| Ph·∫°m vi           | To√†n c·ª•c          | Theo scope   |
| Thay ƒë·ªïi ƒë∆∞·ª£c     | ‚ùå Kh√¥ng bao gi·ªù  | ‚úÖ V·ªõi `mut` |
| Ki·ªÉu d·ªØ li·ªáu      | B·∫Øt bu·ªôc ch·ªâ ƒë·ªãnh | C√≥ th·ªÉ infer |
| Naming convention | UPPER_SNAKE_CASE  | snake_case   |

```rust copy
const MAX_POINTS: u32 = 100_000;
const PI: f64 = 3.14159;

fn main() {
    const PROGRAM_NAME: &str = "Rust Learner";
    println!("Max points: {}", MAX_POINTS);
}
```

### 4.2 Static Variables

```rust copy
static HELLO_WORLD: &str = "Hello, world!";
static mut COUNTER: usize = 0; // Unsafe ƒë·ªÉ modify

fn main() {
    println!("{}", HELLO_WORLD);
}
```

---

## 5. SCOPE V√Ä LIFETIME C∆† B·∫¢N

### 5.1 Variable Scope

```mermaid
graph TD
    A[main function scope] --> B[Outer scope]
    B --> C[Inner scope block]
    C --> D[Variables trong inner scope]
    D --> E[Kh√¥ng truy c·∫≠p ƒë∆∞·ª£c t·ª´ outer]
    B --> F[Variables trong outer scope]
    F --> G[Truy c·∫≠p ƒë∆∞·ª£c t·ª´ inner]
```

```rust copy
fn main() {
    let x = 5; // x c√≥ scope trong main function

    {
        let y = 10; // y ch·ªâ c√≥ scope trong block n√†y
        println!("x: {}, y: {}", x, y); // OK: c·∫£ x v√† y ƒë·ªÅu accessible
    } // y b·ªã dropped ·ªü ƒë√¢y

    println!("x: {}", x); // OK: x v·∫´n trong scope
    // println!("y: {}", y); // ‚ùå L·ªñI: y ƒë√£ out of scope
}
```

### 5.2 Variable Lifecycle

<div className="border border-blue-200 rounded-lg p-4 my-4">
<h4 className="text-blue-600 font-semibold">üîÑ V√≤ng ƒë·ªùi c·ªßa bi·∫øn</h4>
<ol className="list-decimal ml-4">
<li><strong>Creation:</strong> Bi·∫øn ƒë∆∞·ª£c t·∫°o khi g·∫∑p <code>let</code></li>
<li><strong>Usage:</strong> Bi·∫øn c√≥ th·ªÉ ƒë∆∞·ª£c s·ª≠ d·ª•ng trong scope</li>
<li><strong>Drop:</strong> Bi·∫øn t·ª± ƒë·ªông b·ªã gi·∫£i ph√≥ng khi ra kh·ªèi scope</li>
</ol>
</div>

---

## 6. TH·ª∞C H√ÄNH: CH∆Ø∆†NG TR√åNH T√çNH TO√ÅN

```rust copy
fn main() {
    // Constants
    const TAX_RATE: f64 = 0.1;
    const DISCOUNT_THRESHOLD: f64 = 1000.0;

    // Immutable variables
    let product_name = "Laptop";
    let base_price = 1200.0;

    // Mutable variable
    let mut final_price = base_price;

    // Apply discount if over threshold
    if base_price > DISCOUNT_THRESHOLD {
        final_price = final_price * 0.9; // 10% discount
        println!("√Åp d·ª•ng gi·∫£m gi√° 10%");
    }

    // Calculate tax
    let tax_amount = final_price * TAX_RATE;
    final_price = final_price + tax_amount;

    // Shadowing for different representation
    let final_price = (final_price * 100.0).round() / 100.0; // Round to 2 decimals

    // Display results
    println!("S·∫£n ph·∫©m: {}", product_name);
    println!("Gi√° g·ªëc: ${:.2}", base_price);
    println!("Thu·∫ø: ${:.2}", tax_amount);
    println!("Gi√° cu·ªëi: ${:.2}", final_price);
}
```

---

## 7. B√ÄI T·∫¨P TH·ª∞C H√ÄNH

### B√†i t·∫≠p 1: Temperature Converter

Vi·∫øt ch∆∞∆°ng tr√¨nh chuy·ªÉn ƒë·ªïi nhi·ªát ƒë·ªô t·ª´ Celsius sang Fahrenheit v√† ng∆∞·ª£c l·∫°i.

### B√†i t·∫≠p 2: Simple Interest Calculator

T·∫°o ch∆∞∆°ng tr√¨nh t√≠nh l√£i su·∫•t ƒë∆°n gi·∫£n v·ªõi c√°c bi·∫øn immutable v√† mutable.

### B√†i t·∫≠p 3: Variable Scope Explorer

Th·ª±c h√†nh v·ªõi scopes kh√°c nhau v√† quan s√°t lifetime c·ªßa bi·∫øn.

---

## üìö T√ìM T·∫ÆT B√ÄI H·ªåC

<div className="grid grid-cols-1 md:grid-cols-2 gap-4 my-6">
<div className="border border-green-200 rounded-lg p-4">
<h4 className="text-green-600 font-semibold mb-2">‚úÖ ƒê√£ h·ªçc ƒë∆∞·ª£c</h4>
<ul className="list-disc ml-4 space-y-1">
<li>C√∫ ph√°p c∆° b·∫£n: comments, statements vs expressions</li>
<li>Khai b√°o bi·∫øn v·ªõi <code>let</code></li>
<li>Immutability by default v√† s·ª≠ d·ª•ng <code>mut</code></li>
<li>Shadowing variables</li>
<li>Constants v√† static variables</li>
<li>Scope v√† variable lifetime</li>
</ul>
</div>
<div className="border border-blue-200 rounded-lg p-4">
<h4 className="text-blue-600 font-semibold mb-2">üéØ B√†i ti·∫øp theo</h4>
<ul className="list-disc ml-4 space-y-1">
<li>Ki·ªÉu d·ªØ li·ªáu c∆° b·∫£n (scalar types)</li>
<li>Compound types (tuples, arrays)</li>
<li>Type inference v√† type casting</li>
<li>Memory management c∆° b·∫£n</li>
</ul>
</div>
</div>

---

## üîó T√ÄI LI·ªÜU THAM KH·∫¢O

- [The Rust Programming Language - Variables](https://doc.rust-lang.org/book/ch03-01-variables-and-mutability.html)
- [Rust by Example - Variables](https://doc.rust-lang.org/rust-by-example/variable_bindings.html)
- [Rustlings Exercises](https://github.com/rust-lang/rustlings)
