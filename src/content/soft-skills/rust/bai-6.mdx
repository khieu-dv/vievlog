# BÃ€I 6: STRUCTS VÃ€ ENUMS - Táº O CÃC KIá»‚U Dá»® LIá»†U TÃ™Y CHá»ˆNH

<div className="bg-gradient-to-r from-orange-400 to-red-600 text-white p-6 rounded-lg mb-8">
  <h2 className="text-2xl font-bold mb-2">ğŸ¯ Má»¥c TiÃªu BÃ i Há»c</h2>
  <p className="text-lg">Táº¡o vÃ  sá»­ dá»¥ng custom data types vá»›i structs vÃ  enums Ä‘á»ƒ mÃ´ hÃ¬nh hÃ³a dá»¯ liá»‡u phá»©c táº¡p trong Rust</p>
</div>

## ğŸ—ï¸ Structs - Cáº¥u TrÃºc Dá»¯ Liá»‡u

### CÃ¡c Loáº¡i Structs

```mermaid
graph TD
    A[Structs] --> B[Named Structs]
    A --> C[Tuple Structs]  
    A --> D[Unit Structs]
    
    B --> B1[CÃ³ tÃªn trÆ°á»ng]
    B --> B2[Linh hoáº¡t nháº¥t]
    
    C --> C1[KhÃ´ng tÃªn trÆ°á»ng]
    C --> C2[Truy cáº­p theo index]
    
    D --> D1[KhÃ´ng cÃ³ dá»¯ liá»‡u]
    D --> D2[DÃ¹ng cho marker types]
```

### 1. Named Structs (Structs cÃ³ tÃªn trÆ°á»ng)

<div className="bg-blue-50 p-4 rounded-lg border-l-4 border-blue-400 mb-4">
  <h4 className="font-semibold text-blue-800">ğŸ“– Äá»‹nh nghÄ©a</h4>
  <p className="text-blue-700">Named structs lÃ  loáº¡i phá»• biáº¿n nháº¥t, cho phÃ©p Ä‘áº·t tÃªn cho tá»«ng trÆ°á»ng dá»¯ liá»‡u</p>
</div>

```rust
// Äá»‹nh nghÄ©a struct Employee
struct Employee {
    id: u32,
    name: String,
    email: String,
    salary: f64,
    is_active: bool,
}

// Táº¡o instance
fn main() {
    let emp1 = Employee {
        id: 1,
        name: String::from("Nguyen Van A"),
        email: String::from("a@company.com"),
        salary: 50000.0,
        is_active: true,
    };
    
    // Truy cáº­p trÆ°á»ng
    println!("Employee: {}, ID: {}", emp1.name, emp1.id);
}
```

### 2. Tuple Structs

```rust
// Äá»‹nh nghÄ©a tuple structs
struct Point(f64, f64, f64);  // 3D Point
struct Color(u8, u8, u8);     // RGB Color

fn main() {
    let origin = Point(0.0, 0.0, 0.0);
    let red = Color(255, 0, 0);
    
    // Truy cáº­p theo index
    println!("Point: ({}, {}, {})", origin.0, origin.1, origin.2);
    println!("Red color: ({}, {}, {})", red.0, red.1, red.2);
}
```

### 3. Unit Structs

```rust
// Unit structs - khÃ´ng cÃ³ dá»¯ liá»‡u
struct DatabaseConnection;
struct NetworkError;

// ThÆ°á»ng dÃ¹ng lÃ m marker types
impl DatabaseConnection {
    fn connect() -> Self {
        DatabaseConnection
    }
}
```

### Struct Update Syntax

<div className="bg-green-50 p-4 rounded-lg border-l-4 border-green-400 mb-4">
  <h4 className="font-semibold text-green-800">âœ¨ Máº¹o hay</h4>
  <p className="text-green-700">Sá»­ dá»¥ng <code>..other_struct</code> Ä‘á»ƒ copy cÃ¡c trÆ°á»ng tá»« struct khÃ¡c</p>
</div>

```rust
let emp1 = Employee {
    id: 1,
    name: String::from("Nguyen Van A"),
    email: String::from("a@company.com"),
    salary: 50000.0,
    is_active: true,
};

// Táº¡o emp2 dá»±a trÃªn emp1
let emp2 = Employee {
    id: 2,
    name: String::from("Nguyen Van B"),
    ..emp1  // Copy cÃ¡c trÆ°á»ng cÃ²n láº¡i tá»« emp1
};
```

## ğŸ“‹ So SÃ¡nh CÃ¡c Loáº¡i Structs

| Loáº¡i Struct | CÃº phÃ¡p | Truy cáº­p | Sá»­ dá»¥ng |
|-------------|---------|----------|---------|
| Named | `struct Person { name: String }` | `person.name` | Dá»¯ liá»‡u phá»©c táº¡p |
| Tuple | `struct Point(f64, f64)` | `point.0` | NhÃ³m dá»¯ liá»‡u Ä‘Æ¡n giáº£n |
| Unit | `struct Marker;` | N/A | Marker types, Zero-sized |

## ğŸ› ï¸ Methods vÃ  Associated Functions

### Impl Blocks - Äá»‹nh nghÄ©a Methods

```rust
struct Rectangle {
    width: u32,
    height: u32,
}

impl Rectangle {
    // Associated function (nhÆ° static method)
    fn new(width: u32, height: u32) -> Rectangle {
        Rectangle { width, height }
    }
    
    // Method (nháº­n &self)
    fn area(&self) -> u32 {
        self.width * self.height
    }
    
    // Method cÃ³ thá»ƒ thay Ä‘á»•i struct
    fn double_size(&mut self) {
        self.width *= 2;
        self.height *= 2;
    }
    
    // Method nháº­n ownership
    fn destroy(self) -> String {
        format!("Rectangle {}x{} destroyed", self.width, self.height)
    }
}

fn main() {
    // Gá»i associated function
    let mut rect = Rectangle::new(10, 20);
    
    // Gá»i methods
    println!("Area: {}", rect.area());
    rect.double_size();
    println!("New area: {}", rect.area());
    
    // rect khÃ´ng thá»ƒ sá»­ dá»¥ng sau destroy()
    println!("{}", rect.destroy());
}
```

## ğŸ­ Enums - Kiá»ƒu Liá»‡t KÃª

### Äá»‹nh nghÄ©a Enum CÆ¡ báº£n

```rust
enum Status {
    Active,
    Inactive,
    Pending,
    Suspended,
}

enum IpAddr {
    V4(u8, u8, u8, u8),      // Tuple variant
    V6(String),               // Single value variant
}

enum Message {
    Quit,                     // Unit variant
    Move { x: i32, y: i32 }, // Struct variant
    Write(String),            // Tuple variant
    ChangeColor(i32, i32, i32), // Multiple values
}
```

### Enum Methods

```rust
impl Status {
    fn is_active(&self) -> bool {
        matches!(self, Status::Active)
    }
    
    fn description(&self) -> &str {
        match self {
            Status::Active => "User is active",
            Status::Inactive => "User is inactive", 
            Status::Pending => "Awaiting approval",
            Status::Suspended => "Account suspended",
        }
    }
}
```

## ğŸ¯ Pattern Matching vá»›i Match

<div className="bg-purple-50 p-4 rounded-lg border-l-4 border-purple-400 mb-4">
  <h4 className="font-semibold text-purple-800">ğŸ” Pattern Matching</h4>
  <p className="text-purple-700">Match expressions pháº£i xá»­ lÃ½ táº¥t cáº£ cÃ¡c trÆ°á»ng há»£p cÃ³ thá»ƒ (exhaustive)</p>
</div>

```rust
fn process_message(msg: Message) {
    match msg {
        Message::Quit => println!("Quit message received"),
        Message::Move { x, y } => println!("Move to ({}, {})", x, y),
        Message::Write(text) => println!("Text message: {}", text),
        Message::ChangeColor(r, g, b) => {
            println!("Change color to RGB({}, {}, {})", r, g, b)
        }
    }
}

fn process_ip(ip: IpAddr) {
    match ip {
        IpAddr::V4(a, b, c, d) => {
            println!("IPv4: {}.{}.{}.{}", a, b, c, d)
        }
        IpAddr::V6(addr) => {
            println!("IPv6: {}", addr)
        }
    }
}
```

## ğŸª If Let vÃ  While Let

### If Let - Pattern Matching Ngáº¯n gá»n

```rust
let status = Status::Active;

// Thay vÃ¬ dÃ¹ng match Ä‘áº§y Ä‘á»§
if let Status::Active = status {
    println!("User is active!");
}

// Vá»›i dá»¯ liá»‡u
let msg = Message::Write(String::from("Hello"));
if let Message::Write(text) = msg {
    println!("Message content: {}", text);
}
```

### While Let - Láº·p vá»›i Pattern

```rust
let mut stack = vec![1, 2, 3, 4, 5];

while let Some(value) = stack.pop() {
    println!("Popped: {}", value);
}
```

## ğŸ“Š SÆ¡ Äá»“ Luá»“ng Pattern Matching

```mermaid
flowchart TD
    A[Enum Value] --> B{Match Expression}
    B --> C[Variant 1]
    B --> D[Variant 2] 
    B --> E[Variant 3]
    B --> F[Wildcard _]
    
    C --> G[Extract Data]
    D --> H[Extract Data]
    E --> I[Extract Data]
    F --> J[Default Case]
    
    G --> K[Execute Code]
    H --> K
    I --> K
    J --> K
```

## ğŸ’¼ Thá»±c HÃ nh: Employee Management System

```rust
#[derive(Debug)]
enum EmployeeType {
    FullTime { salary: f64 },
    PartTime { hourly_rate: f64, hours_per_week: u32 },
    Contract { daily_rate: f64, days_remaining: u32 },
    Intern,
}

#[derive(Debug)]
struct Employee {
    id: u32,
    name: String,
    email: String,
    employee_type: EmployeeType,
    is_active: bool,
}

impl Employee {
    fn new(id: u32, name: String, email: String, emp_type: EmployeeType) -> Self {
        Employee {
            id,
            name,
            email,
            employee_type: emp_type,
            is_active: true,
        }
    }
    
    fn calculate_monthly_payment(&self) -> f64 {
        if !self.is_active {
            return 0.0;
        }
        
        match &self.employee_type {
            EmployeeType::FullTime { salary } => salary / 12.0,
            EmployeeType::PartTime { hourly_rate, hours_per_week } => {
                hourly_rate * (*hours_per_week as f64) * 4.33 // Trung bÃ¬nh tuáº§n/thÃ¡ng
            },
            EmployeeType::Contract { daily_rate, days_remaining: _ } => {
                daily_rate * 22.0 // 22 ngÃ y lÃ m viá»‡c/thÃ¡ng
            },
            EmployeeType::Intern => 0.0,
        }
    }
    
    fn get_type_description(&self) -> String {
        match &self.employee_type {
            EmployeeType::FullTime { salary } => {
                format!("Full-time (${:.2}/year)", salary)
            },
            EmployeeType::PartTime { hourly_rate, hours_per_week } => {
                format!("Part-time (${:.2}/hour, {}h/week)", hourly_rate, hours_per_week)
            },
            EmployeeType::Contract { daily_rate, days_remaining } => {
                format!("Contract (${:.2}/day, {} days left)", daily_rate, days_remaining)
            },
            EmployeeType::Intern => String::from("Intern (Unpaid)"),
        }
    }
    
    fn deactivate(&mut self) {
        self.is_active = false;
    }
}

fn main() {
    let mut employees = vec![
        Employee::new(
            1,
            String::from("Nguyen Van A"),
            String::from("a@company.com"),
            EmployeeType::FullTime { salary: 60000.0 }
        ),
        Employee::new(
            2, 
            String::from("Tran Thi B"),
            String::from("b@company.com"),
            EmployeeType::PartTime { hourly_rate: 25.0, hours_per_week: 20 }
        ),
        Employee::new(
            3,
            String::from("Le Van C"), 
            String::from("c@company.com"),
            EmployeeType::Contract { daily_rate: 200.0, days_remaining: 90 }
        ),
        Employee::new(
            4,
            String::from("Pham Thi D"),
            String::from("d@company.com"), 
            EmployeeType::Intern
        ),
    ];
    
    println!("=== EMPLOYEE MANAGEMENT SYSTEM ===\n");
    
    for emp in &employees {
        println!("ID: {}", emp.id);
        println!("Name: {}", emp.name);
        println!("Email: {}", emp.email);
        println!("Type: {}", emp.get_type_description());
        println!("Monthly Payment: ${:.2}", emp.calculate_monthly_payment());
        println!("Status: {}", if emp.is_active { "Active" } else { "Inactive" });
        println!("---");
    }
    
    // Deactivate employee
    employees[0].deactivate();
    println!("\nAfter deactivating {}:", employees[0].name);
    println!("Monthly Payment: ${:.2}", employees[0].calculate_monthly_payment());
}
```

## ğŸ“‹ Báº£ng Tá»•ng Káº¿t Kiáº¿n Thá»©c

| KhÃ¡i Niá»‡m | CÃº PhÃ¡p | Äáº·c Äiá»ƒm | VÃ­ Dá»¥ |
|-----------|---------|----------|--------|
| Named Struct | `struct Person { name: String }` | CÃ³ tÃªn trÆ°á»ng, rÃµ rÃ ng | `person.name` |
| Tuple Struct | `struct Point(i32, i32)` | KhÃ´ng tÃªn trÆ°á»ng, ngáº¯n gá»n | `point.0` |
| Unit Struct | `struct Marker;` | KhÃ´ng dá»¯ liá»‡u, marker | `Marker` |
| Enum | `enum Status { Active, Inactive }` | Má»™t trong nhiá»u giÃ¡ trá»‹ | `Status::Active` |
| Match | `match value { ... }` | Pháº£i exhaustive | Xá»­ lÃ½ táº¥t cáº£ cases |
| If Let | `if let Some(x) = opt { ... }` | Pattern matching ngáº¯n | Chá»‰ quan tÃ¢m 1 case |

## ğŸ¯ BÃ i Táº­p Thá»±c HÃ nh

<div className="bg-yellow-50 p-4 rounded-lg border-l-4 border-yellow-400 mb-4">
  <h4 className="font-semibold text-yellow-800">ğŸ“ Thá»­ ThÃ¡ch</h4>
  <p className="text-yellow-700">HÃ£y má»Ÿ rá»™ng Employee Management System Ä‘á»ƒ há»— trá»£ thÃªm cÃ¡c tÃ­nh nÄƒng sau:</p>
</div>

1. **ThÃªm Department enum** vá»›i cÃ¡c phÃ²ng ban khÃ¡c nhau
2. **Performance Rating enum** vá»›i cÃ¡c má»©c Ä‘Ã¡nh giÃ¡ 
3. **Methods Ä‘á»ƒ tÃ­nh bonus** dá»±a trÃªn loáº¡i nhÃ¢n viÃªn vÃ  performance
4. **Search functionality** Ä‘á»ƒ tÃ¬m nhÃ¢n viÃªn theo tÃªn hoáº·c email
5. **Promotion system** Ä‘á»ƒ thÄƒng chá»©c nhÃ¢n viÃªn

## ğŸ”— TÃ i Liá»‡u Tham Kháº£o

- [The Rust Book - Structs](https://doc.rust-lang.org/book/ch05-00-structs.html)
- [The Rust Book - Enums](https://doc.rust-lang.org/book/ch06-00-enums.html)
- [Rust by Example - Structs](https://doc.rust-lang.org/rust-by-example/custom_types/structs.html)

---

<div className="bg-gradient-to-r from-green-400 to-blue-500 text-white p-6 rounded-lg">
  <h3 className="text-xl font-bold mb-2">ğŸ‰ ChÃºc Má»«ng!</h3>
  <p>Báº¡n Ä‘Ã£ hoÃ n thÃ nh BÃ i 6 vá» Structs vÃ  Enums. Giá» Ä‘Ã¢y báº¡n cÃ³ thá»ƒ táº¡o cÃ¡c kiá»ƒu dá»¯ liá»‡u phá»©c táº¡p Ä‘á»ƒ mÃ´ hÃ¬nh hÃ³a domain logic trong á»©ng dá»¥ng Rust!</p>
</div>

**Tiáº¿p theo:** BÃ i 7 - Pattern Matching vÃ  Destructuring