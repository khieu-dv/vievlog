# B√†i 3: SPA vs SSR v√† gi·ªõi thi·ªáu Next.js

<div className="bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-lg border-l-4 border-blue-500 mb-8">
  <h2 className="text-2xl font-bold text-gray-800 mb-2">üéØ M·ª•c ti√™u h·ªçc t·∫≠p</h2>
  <ul className="text-gray-700 space-y-1">
    <li>‚úÖ Hi·ªÉu r√µ s·ª± kh√°c bi·ªát gi·ªØa SPA, SSR, CSR v√† SSG</li>
    <li>‚úÖ N·∫Øm ƒë∆∞·ª£c ∆∞u nh∆∞·ª£c ƒëi·ªÉm c·ªßa t·ª´ng ph∆∞∆°ng ph√°p rendering</li>
    <li>‚úÖ T√¨m hi·ªÉu l√Ω do c·∫ßn Next.js v√† l·ª£i √≠ch so v·ªõi React thu·∫ßn</li>
    <li>‚úÖ So s√°nh Next.js v·ªõi c√°c framework kh√°c</li>
  </ul>
</div>

## I. GI·ªöI THI·ªÜU C√ÅC PH∆Ø∆†NG PH√ÅP RENDERING

### 1.1 T·ªïng quan v·ªÅ Web Rendering

<div className="border border-gray-200 rounded-lg p-4 mb-6">
  <h3 className="text-lg font-semibold text-gray-800 mb-3">üîÑ Qu√° tr√¨nh Rendering Web</h3>
  <div className="text-gray-600">
    Rendering l√† qu√° tr√¨nh chuy·ªÉn ƒë·ªïi code th√†nh giao di·ªán ng∆∞·ªùi d√πng c√≥ th·ªÉ t∆∞∆°ng t√°c. 
    C√≥ 4 ph∆∞∆°ng ph√°p ch√≠nh trong React/Next.js ecosystem.
  </div>
</div>

```mermaid
graph TD
    A[Web Rendering Methods] --> B[Client Side Rendering - CSR]
    A --> C[Server Side Rendering - SSR]
    A --> D[Static Site Generation - SSG]
    A --> E[Incremental Static Regeneration - ISR]
    
    B --> B1[React SPA]
    C --> C1[Next.js SSR]
    D --> D1[Next.js SSG]
    E --> E1[Next.js ISR]
```

### 1.2 So s√°nh c√°c ph∆∞∆°ng ph√°p Rendering

| Ph∆∞∆°ng ph√°p | Th·ªùi gian build | First Paint | SEO | Interactivity | Use Case |
|-------------|-----------------|-------------|-----|---------------|----------|
| **CSR (SPA)** | Nhanh | Ch·∫≠m | ‚ùå K√©m | ‚ö° T·ª©c th√¨ | Dashboard, Admin Panel |
| **SSR** | Trung b√¨nh | ‚ö° Nhanh | ‚úÖ T·ªët | Ch·∫≠m | E-commerce, News |
| **SSG** | Ch·∫≠m | ‚ö° R·∫•t nhanh | ‚úÖ Xu·∫•t s·∫Øc | Trung b√¨nh | Blog, Documentation |
| **ISR** | Nhanh | ‚ö° Nhanh | ‚úÖ T·ªët | Trung b√¨nh | Hybrid Apps |

## II. SINGLE PAGE APPLICATION (SPA)

### 2.1 Kh√°i ni·ªám SPA

<div className="bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4">
  <h4 className="font-semibold text-yellow-800">üì± Single Page Application</h4>
  <div className="text-yellow-700 mt-2">
    SPA l√† ·ª©ng d·ª•ng web ch·ªâ c√≥ m·ªôt trang HTML duy nh·∫•t, n·ªôi dung ƒë∆∞·ª£c thay ƒë·ªïi ƒë·ªông th√¥ng qua JavaScript.
  </div>
</div>

```mermaid
sequenceDiagram
    participant User
    participant Browser
    participant Server
    
    User->>Browser: Visit website
    Browser->>Server: Request HTML/CSS/JS
    Server->>Browser: Send bundle.js + index.html
    Browser->>Browser: Render initial page
    User->>Browser: Click navigation
    Browser->>Browser: Update DOM (No server request)
    Browser->>Server: API calls for data only
    Server->>Browser: JSON data
    Browser->>Browser: Update UI
```

### 2.2 ∆Øu v√† nh∆∞·ª£c ƒëi·ªÉm c·ªßa SPA

<div className="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
  <div className="bg-green-50 border border-green-200 rounded-lg p-4">
    <h4 className="font-semibold text-green-800 mb-2">‚úÖ ∆Øu ƒëi·ªÉm</h4>
    <ul className="text-green-700 text-sm space-y-1">
      <li>‚Ä¢ Navigation nhanh sau l·∫ßn load ƒë·∫ßu</li>
      <li>‚Ä¢ Tr·∫£i nghi·ªám ng∆∞·ªùi d√πng m∆∞·ª£t m√†</li>
      <li>‚Ä¢ Gi·∫£m t·∫£i cho server</li>
      <li>‚Ä¢ D·ªÖ deploy v√† cache</li>
    </ul>
  </div>
  
  <div className="bg-red-50 border border-red-200 rounded-lg p-4">
    <h4 className="font-semibold text-red-800 mb-2">‚ùå Nh∆∞·ª£c ƒëi·ªÉm</h4>
    <ul className="text-red-700 text-sm space-y-1">
      <li>‚Ä¢ SEO k√©m do n·ªôi dung load b·∫±ng JS</li>
      <li>‚Ä¢ First Load ch·∫≠m (bundle l·ªõn)</li>
      <li>‚Ä¢ Kh√¥ng ho·∫°t ƒë·ªông khi JS b·ªã t·∫Øt</li>
      <li>‚Ä¢ Kh√≥ debug v√† maintain</li>
    </ul>
  </div>
</div>

## III. SERVER SIDE RENDERING (SSR)

### 3.1 Kh√°i ni·ªám SSR

<div className="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4">
  <h4 className="font-semibold text-blue-800">üñ•Ô∏è Server Side Rendering</h4>
  <div className="text-blue-700 mt-2">
    SSR render HTML ho√†n ch·ªânh ·ªü ph√≠a server tr∆∞·ªõc khi g·ª≠i v·ªÅ browser, sau ƒë√≥ "hydrate" ƒë·ªÉ th√™m interactivity.
  </div>
</div>

```mermaid
sequenceDiagram
    participant User
    participant Browser
    participant Server
    participant Database
    
    User->>Browser: Request page
    Browser->>Server: GET /product/123
    Server->>Database: Fetch product data
    Database->>Server: Return data
    Server->>Server: Render HTML with data
    Server->>Browser: Send complete HTML
    Browser->>Browser: Display content immediately
    Browser->>Browser: Download & hydrate JS
    Browser->>Browser: Page becomes interactive
```

### 3.2 SSR Performance Metrics

| Metric | SPA | SSR | C·∫£i thi·ªán |
|--------|-----|-----|-----------|
| **First Contentful Paint** | 3.2s | 1.1s | üî• 65% faster |
| **Largest Contentful Paint** | 4.1s | 1.8s | üî• 56% faster |
| **Time to Interactive** | 3.8s | 2.9s | ‚úÖ 24% faster |
| **SEO Score** | 65/100 | 95/100 | ‚úÖ 46% better |

## IV. STATIC SITE GENERATION (SSG)

### 4.1 Kh√°i ni·ªám SSG

<div className="bg-purple-50 border border-purple-200 rounded-lg p-4 mb-4">
  <h4 className="font-semibold text-purple-800">‚ö° Static Site Generation</h4>
  <p className="text-purple-700 mt-2">
    SSG t·∫°o ra c√°c file HTML tƒ©nh t·∫°i build time, ph·ª•c v·ª• tr·ª±c ti·∫øp t·ª´ CDN m√† kh√¥ng c·∫ßn server processing.
  </p>
</div>

```mermaid
graph LR
    A[Build Time] --> B[Fetch All Data]
    B --> C[Generate HTML Files]
    C --> D[Deploy to CDN]
    D --> E[User Request]
    E --> F[Serve Static HTML]
    
    style A fill:#f9f,stroke:#333,stroke-width:2px
    style D fill:#9f9,stroke:#333,stroke-width:2px
    style F fill:#bbf,stroke:#333,stroke-width:2px
```

### 4.2 SSG vs SSR Comparison

<div className="overflow-x-auto mb-6">
  <table className="min-w-full border border-gray-200">
    <thead className="bg-gray-50">
      <tr>
        <th className="px-4 py-2 text-left font-semibold">Ti√™u ch√≠</th>
        <th className="px-4 py-2 text-left font-semibold">SSG</th>
        <th className="px-4 py-2 text-left font-semibold">SSR</th>
      </tr>
    </thead>
    <tbody>
      <tr className="border-t">
        <td className="px-4 py-2 font-medium">Build Time</td>
        <td className="px-4 py-2 text-red-600">Ch·∫≠m (pre-build all pages)</td>
        <td className="px-4 py-2 text-green-600">Nhanh</td>
      </tr>
      <tr className="border-t">
        <td className="px-4 py-2 font-medium">Response Time</td>
        <td className="px-4 py-2 text-green-600">‚ö° C·ª±c nhanh (CDN)</td>
        <td className="px-4 py-2 text-yellow-600">Trung b√¨nh</td>
      </tr>
      <tr className="border-t">
        <td className="px-4 py-2 font-medium">Dynamic Content</td>
        <td className="px-4 py-2 text-red-600">‚ùå Kh√≥ khƒÉn</td>
        <td className="px-4 py-2 text-green-600">‚úÖ D·ªÖ d√†ng</td>
      </tr>
      <tr className="border-t">
        <td className="px-4 py-2 font-medium">Scaling</td>
        <td className="px-4 py-2 text-green-600">‚úÖ Tuy·ªát v·ªùi</td>
        <td className="px-4 py-2 text-yellow-600">C·∫ßn t·ªëi ∆∞u server</td>
      </tr>
    </tbody>
  </table>
</div>

## V. T·∫†I SAO C·∫¶N NEXT.JS?

### 5.1 V·∫•n ƒë·ªÅ c·ªßa React thu·∫ßn

<div className="bg-orange-50 border border-orange-200 rounded-lg p-4 mb-4">
  <h4 className="font-semibold text-orange-800">‚ö†Ô∏è Th√°ch th·ª©c v·ªõi React thu·∫ßn</h4>
  <ul className="text-orange-700 mt-2 space-y-1">
    <li>‚Ä¢ C·∫ßn setup ph·ª©c t·∫°p cho routing, SSR, bundling</li>
    <li>‚Ä¢ Kh√¥ng c√≥ built-in optimization</li>
    <li>‚Ä¢ SEO y·∫øu v·ªõi CSR</li>
    <li>‚Ä¢ Performance kh√¥ng t·ªëi ∆∞u</li>
  </ul>
</div>

### 5.2 Next.js Solutions Map

```mermaid
mindmap
  root((Next.js Solutions))
    Performance
      Image Optimization
      Font Optimization
      Bundle Splitting
      Lazy Loading
    SEO
      SSR/SSG
      Meta Tags API
      Sitemap Generation
      Open Graph
    Developer Experience
      File-based Routing
      API Routes
      TypeScript Support
      Hot Reloading
    Deployment
      Vercel Integration
      Static Export
      Edge Functions
      CDN Optimization
```

### 5.3 Next.js Core Benefits

| T√≠nh nƒÉng | React thu·∫ßn | Next.js | L·ª£i √≠ch |
|-----------|-------------|---------|---------|
| **Routing** | React Router (th·ªß c√¥ng) | File-based | üöÄ Zero config |
| **SEO** | Client-side only | SSR/SSG | üìà 95+ Lighthouse score |
| **Performance** | Manual optimization | Built-in | ‚ö° T·ª± ƒë·ªông t·ªëi ∆∞u |
| **Bundle Size** | To√†n b·ªô app | Code splitting | üì¶ Gi·∫£m 60% initial load |
| **Image Optimization** | Manual | next/image | üñºÔ∏è T·ª± ƒë·ªông resize/optimize |

## VI. SO S√ÅNH NEXT.JS V·ªöI C√ÅC FRAMEWORK KH√ÅC

### 6.1 Landscape Overview

```mermaid
graph TB
    A[React Ecosystem] --> B[Next.js]
    A --> C[Remix]
    A --> D[Gatsby]
    A --> E[Create React App]
    
    F[Vue Ecosystem] --> G[Nuxt.js]
    H[Svelte Ecosystem] --> I[SvelteKit]
    
    B --> B1[Full-stack Framework]
    C --> C1[Full-stack Framework]
    D --> D1[Static Site Generator]
    G --> G1[Vue-based Framework]
    I --> I1[Svelte-based Framework]
```

### 6.2 Detailed Comparison

<div className="overflow-x-auto mb-6">
  <table className="min-w-full border border-gray-200">
    <thead className="bg-gray-50">
      <tr>
        <th className="px-3 py-2 text-left font-semibold">Framework</th>
        <th className="px-3 py-2 text-left font-semibold">Strengths</th>
        <th className="px-3 py-2 text-left font-semibold">Use Cases</th>
        <th className="px-3 py-2 text-left font-semibold">Learning Curve</th>
      </tr>
    </thead>
    <tbody>
      <tr className="border-t">
        <td className="px-3 py-2 font-medium text-blue-600">Next.js</td>
        <td className="px-3 py-2 text-sm">SSR/SSG, Image optimization, API routes</td>
        <td className="px-3 py-2 text-sm">E-commerce, Corporate sites</td>
        <td className="px-3 py-2 text-green-600">D·ªÖ</td>
      </tr>
      <tr className="border-t">
        <td className="px-3 py-2 font-medium text-purple-600">Remix</td>
        <td className="px-3 py-2 text-sm">Nested routing, Web standards</td>
        <td className="px-3 py-2 text-sm">Web apps, Forms-heavy</td>
        <td className="px-3 py-2 text-yellow-600">Trung b√¨nh</td>
      </tr>
      <tr className="border-t">
        <td className="px-3 py-2 font-medium text-indigo-600">Gatsby</td>
        <td className="px-3 py-2 text-sm">GraphQL, Plugin ecosystem</td>
        <td className="px-3 py-2 text-sm">Blogs, Marketing sites</td>
        <td className="px-3 py-2 text-red-600">Kh√≥</td>
      </tr>
      <tr className="border-t">
        <td className="px-3 py-2 font-medium text-green-600">Nuxt.js</td>
        <td className="px-3 py-2 text-sm">Vue-based, Auto-imports</td>
        <td className="px-3 py-2 text-sm">Vue developers</td>
        <td className="px-3 py-2 text-green-600">D·ªÖ (n·∫øu bi·∫øt Vue)</td>
      </tr>
    </tbody>
  </table>
</div>

### 6.3 Market Share & Trend

| Framework | GitHub Stars | NPM Downloads/week | Job Market | Trend |
|-----------|-------------|-------------------|------------|--------|
| **Next.js** | 120k+ ‚≠ê | 5.2M | üî• R·∫•t cao | üìà TƒÉng m·∫°nh |
| **Remix** | 28k+ ‚≠ê | 180k | üìä TƒÉng tr∆∞·ªüng | üìà TƒÉng |
| **Gatsby** | 55k+ ‚≠ê | 380k | üìä ·ªîn ƒë·ªãnh | üìâ Gi·∫£m nh·∫π |
| **Nuxt.js** | 52k+ ‚≠ê | 450k | üìä ·ªîn ƒë·ªãnh | üìä Stable |

## VII. TH·ª∞C H√ÄNH: PH√ÇN T√çCH HI·ªÜU NƒÇNG

### 7.1 Setup M√¥i tr∆∞·ªùng test

<div className="bg-gray-50 border border-gray-200 rounded-lg p-4 mb-4">
  <h4 className="font-semibold text-gray-800">üîß Tools c·∫ßn thi·∫øt</h4>
  <ul className="text-gray-700 mt-2 space-y-1">
    <li>‚Ä¢ Chrome DevTools (Lighthouse)</li>
    <li>‚Ä¢ WebPageTest.org</li>
    <li>‚Ä¢ React DevTools Profiler</li>
    <li>‚Ä¢ Next.js Bundle Analyzer</li>
  </ul>
</div>

### 7.2 Test Scenarios

```typescript
// Scenario 1: Simple Blog Site
const testCases = {
  spa: {
    url: 'https://react-blog-spa.vercel.app',
    metrics: ['FCP', 'LCP', 'TTI', 'SEO']
  },
  ssr: {
    url: 'https://nextjs-blog-ssr.vercel.app',
    metrics: ['FCP', 'LCP', 'TTI', 'SEO']
  },
  ssg: {
    url: 'https://nextjs-blog-ssg.vercel.app', 
    metrics: ['FCP', 'LCP', 'TTI', 'SEO']
  }
}

// Scenario 2: E-commerce Product Page
const ecommerceTest = {
  dynamicContent: true,
  userInteraction: 'high',
  seoRequirement: 'critical'
}
```

### 7.3 Performance Results

<div className="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
  <div className="border border-gray-200 rounded-lg p-4">
    <h4 className="font-semibold text-center mb-3">SPA Results</h4>
    <div className="space-y-2 text-sm">
      <div className="flex justify-between">
        <span>FCP:</span>
        <span className="text-red-600">3.2s</span>
      </div>
      <div className="flex justify-between">
        <span>LCP:</span>
        <span className="text-red-600">4.1s</span>
      </div>
      <div className="flex justify-between">
        <span>SEO:</span>
        <span className="text-red-600">65/100</span>
      </div>
    </div>
  </div>
  
  <div className="border border-gray-200 rounded-lg p-4">
    <h4 className="font-semibold text-center mb-3">SSR Results</h4>
    <div className="space-y-2 text-sm">
      <div className="flex justify-between">
        <span>FCP:</span>
        <span className="text-green-600">1.1s</span>
      </div>
      <div className="flex justify-between">
        <span>LCP:</span>
        <span className="text-green-600">1.8s</span>
      </div>
      <div className="flex justify-between">
        <span>SEO:</span>
        <span className="text-green-600">95/100</span>
      </div>
    </div>
  </div>
  
  <div className="border border-gray-200 rounded-lg p-4">
    <h4 className="font-semibold text-center mb-3">SSG Results</h4>
    <div className="space-y-2 text-sm">
      <div className="flex justify-between">
        <span>FCP:</span>
        <span className="text-green-600">0.8s</span>
      </div>
      <div className="flex justify-between">
        <span>LCP:</span>
        <span className="text-green-600">1.2s</span>
      </div>
      <div className="flex justify-between">
        <span>SEO:</span>
        <span className="text-green-600">98/100</span>
      </div>
    </div>
  </div>
</div>

## VIII. K·∫æT LU·∫¨N V√Ä H∆Ø·ªöNG D·∫™N CH·ªåN L·ª∞A

### 8.1 Decision Tree

```mermaid
flowchart TD
    A[B·∫Øt ƒë·∫ßu d·ª± √°n m·ªõi] --> B{C·∫ßn SEO?}
    B -->|Kh√¥ng| C[SPA v·ªõi React]
    B -->|C√≥| D{Content thay ƒë·ªïi th∆∞·ªùng xuy√™n?}
    D -->|C√≥| E[Next.js SSR]
    D -->|Kh√¥ng| F{S·ªë l∆∞·ª£ng trang?}
    F -->|√çt <100| G[Next.js SSG]
    F -->|Nhi·ªÅu >100| H[Next.js ISR]
    
    C --> I[Create React App]
    E --> J[getServerSideProps]
    G --> K[getStaticProps]
    H --> L[getStaticProps + revalidate]
```

### 8.2 Recommendation Matrix

| D·ª± √°n | SPA | SSR | SSG | Framework |
|-------|-----|-----|-----|-----------|
| **Admin Dashboard** | ‚úÖ Perfect | ‚ùå Overkill | ‚ùå No | React + Router |
| **E-commerce** | ‚ùå Poor SEO | ‚úÖ Perfect | ü§î Hybrid | **Next.js** |
| **Blog/News** | ‚ùå Poor SEO | ü§î OK | ‚úÖ Perfect | **Next.js** |
| **Corporate Site** | ‚ùå Poor SEO | ü§î OK | ‚úÖ Perfect | **Next.js** |
| **Real-time App** | ‚úÖ Good | ü§î Partial | ‚ùå No | React + Socket.io |

<div className="bg-blue-50 border-l-4 border-blue-500 p-4 mt-6">
  <h3 className="text-lg font-semibold text-blue-800 mb-2">üéØ Takeaways ch√≠nh</h3>
  <ul className="text-blue-700 space-y-1">
    <li>‚Ä¢ <strong>SPA</strong>: T·ªët cho internal tools, dashboards</li>
    <li>‚Ä¢ <strong>SSR</strong>: T·ªët cho dynamic content + SEO</li>
    <li>‚Ä¢ <strong>SSG</strong>: T·ªët nh·∫•t cho static content + SEO</li>
    <li>‚Ä¢ <strong>Next.js</strong>: Best choice cho majority c·ªßa web projects</li>
  </ul>
</div>

<div className="bg-green-50 border border-green-200 rounded-lg p-4 mt-4">
  <h3 className="text-lg font-semibold text-green-800 mb-2">üìö Chu·∫©n b·ªã cho b√†i ti·∫øp theo</h3>
  <div className="text-green-700">
    B√†i 4 s·∫Ω h∆∞·ªõng d·∫´n kh·ªüi t·∫°o d·ª± √°n Next.js ƒë·∫ßu ti√™n v·ªõi create-next-app, 
    setup TypeScript v√† kh√°m ph√° c·∫•u tr√∫c th∆∞ m·ª•c.
  </div>
</div>