# BÃ i 4: Khá»Ÿi táº¡o dá»± Ã¡n vá»›i create-next-app

<div className="bg-blue-50 border-l-4 border-blue-500 p-4 mb-6">
  <h2 className="text-xl font-bold text-blue-800 mb-2">ğŸ¯ Má»¥c tiÃªu bÃ i há»c</h2>
  <p className="text-blue-700">Sau bÃ i há»c nÃ y, báº¡n sáº½ thÃ nh tháº¡o viá»‡c khá»Ÿi táº¡o vÃ  cáº¥u hÃ¬nh dá»± Ã¡n Next.js vá»›i TypeScript vÃ  cÃ¡c cÃ´ng cá»¥ há»— trá»£.</p>
</div>

## 1. CÃ i Ä‘áº·t create-next-app

### 1.1 YÃªu cáº§u há»‡ thá»‘ng

| CÃ´ng cá»¥ | PhiÃªn báº£n tá»‘i thiá»ƒu | Ghi chÃº |
|---------|-------------------|---------|
| Node.js | 18.17+ | Khuyáº¿n nghá»‹ 20+ |
| npm | 9+ | Hoáº·c yarn, pnpm |
| Git | 2.0+ | Cho version control |

### 1.2 Lá»‡nh cÃ i Ä‘áº·t cÆ¡ báº£n

```bash
# CÃ i Ä‘áº·t dá»± Ã¡n má»›i
npx create-next-app@latest my-nextjs-app

# Vá»›i TypeScript (khuyáº¿n nghá»‹)
npx create-next-app@latest my-nextjs-app --typescript

# Vá»›i Ä‘áº§y Ä‘á»§ options
npx create-next-app@latest my-nextjs-app \
  --typescript \
  --tailwind \
  --eslint \
  --app \
  --src-dir \
  --import-alias "@/*"
```

### 1.3 Options chi tiáº¿t

| Option | MÃ´ táº£ | Khuyáº¿n nghá»‹ |
|--------|-------|-------------|
| `--typescript` | Sá»­ dá»¥ng TypeScript | âœ… |
| `--tailwind` | CÃ i Ä‘áº·t Tailwind CSS | âœ… |
| `--eslint` | Cáº¥u hÃ¬nh ESLint | âœ… |
| `--app` | Sá»­ dá»¥ng App Router | âœ… |
| `--src-dir` | Táº¡o thÆ° má»¥c src/ | âš ï¸ |
| `--import-alias` | Cáº¥u hÃ¬nh path alias | âœ… |

<div className="bg-amber-50 border-l-4 border-amber-500 p-4 my-4">
  <p className="text-amber-800"><strong>ğŸ’¡ LÆ°u Ã½:</strong> App Router lÃ  default tá»« Next.js 13.4+, thay tháº¿ Pages Router.</p>
</div>

## 2. Cáº¥u trÃºc thÆ° má»¥c dá»± Ã¡n

```mermaid
graph TD
    A[my-nextjs-app/] --> B[app/]
    A --> C[public/]
    A --> D[node_modules/]
    A --> E[Config Files]
    
    B --> B1[layout.tsx]
    B --> B2[page.tsx]
    B --> B3[globals.css]
    
    C --> C1[images/]
    C --> C2[icons/]
    
    E --> E1[package.json]
    E --> E2[next.config.js]
    E --> E3[tailwind.config.ts]
    E --> E4[tsconfig.json]
```

### 2.1 ThÆ° má»¥c vÃ  file quan trá»ng

<div className="overflow-x-auto">

| ThÆ° má»¥c/File | Chá»©c nÄƒng | Quan trá»ng |
|--------------|-----------|------------|
| `app/` | App Router - chá»©a routes, layouts, pages | ğŸ”´ Cao |
| `app/layout.tsx` | Root layout cho toÃ n á»©ng dá»¥ng | ğŸ”´ Cao |
| `app/page.tsx` | Homepage cá»§a á»©ng dá»¥ng | ğŸ”´ Cao |
| `app/globals.css` | CSS toÃ n cá»¥c | ğŸŸ¡ Trung bÃ¬nh |
| `public/` | Static assets (images, icons) | ğŸŸ¡ Trung bÃ¬nh |
| `next.config.js` | Cáº¥u hÃ¬nh Next.js | ğŸŸ  Tháº¥p |
| `package.json` | Dependencies vÃ  scripts | ğŸ”´ Cao |
| `tsconfig.json` | Cáº¥u hÃ¬nh TypeScript | ğŸŸ¡ Trung bÃ¬nh |

</div>

### 2.2 Cáº¥u trÃºc chi tiáº¿t app/

```
app/
â”œâ”€â”€ layout.tsx          # Root layout
â”œâ”€â”€ page.tsx           # Homepage (/)
â”œâ”€â”€ globals.css        # Global styles
â”œâ”€â”€ loading.tsx        # Global loading UI
â”œâ”€â”€ error.tsx          # Global error UI
â”œâ”€â”€ not-found.tsx      # 404 page
â””â”€â”€ favicon.ico        # Site favicon
```

## 3. Cáº¥u hÃ¬nh TypeScript

### 3.1 File tsconfig.json máº·c Ä‘á»‹nh

```json
{
  "compilerOptions": {
    "lib": ["dom", "dom.iterable", "es6"],
    "allowJs": true,
    "skipLibCheck": true,
    "strict": true,
    "noEmit": true,
    "esModuleInterop": true,
    "module": "esnext",
    "moduleResolution": "bundler",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "jsx": "preserve",
    "incremental": true,
    "plugins": [
      {
        "name": "next"
      }
    ],
    "baseUrl": ".",
    "paths": {
      "@/*": ["./src/*"]
    }
  },
  "include": ["next-env.d.ts", "**/*.ts", "**/*.tsx", ".next/types/**/*.ts"],
  "exclude": ["node_modules"]
}
```

### 3.2 TÃ¹y chá»‰nh TypeScript config

| Option | MÃ´ táº£ | Khuyáº¿n nghá»‹ |
|--------|-------|-------------|
| `strict: true` | Báº­t cháº¿ Ä‘á»™ strict | âœ… |
| `noUnusedLocals` | Cáº£nh bÃ¡o biáº¿n khÃ´ng dÃ¹ng | âœ… |
| `noUnusedParameters` | Cáº£nh bÃ¡o tham sá»‘ khÃ´ng dÃ¹ng | âœ… |
| `exactOptionalPropertyTypes` | Kiá»ƒm tra optional properties chÃ­nh xÃ¡c | âš ï¸ |

## 4. Cáº¥u hÃ¬nh ESLint vÃ  Prettier

### 4.1 ESLint Configuration

```json
// .eslintrc.json
{
  "extends": [
    "next/core-web-vitals",
    "@typescript-eslint/recommended"
  ],
  "rules": {
    "@typescript-eslint/no-unused-vars": "error",
    "@typescript-eslint/no-explicit-any": "warn",
    "prefer-const": "error"
  }
}
```

### 4.2 Prettier Setup

```json
// .prettierrc
{
  "semi": false,
  "trailingComma": "es5",
  "singleQuote": true,
  "tabWidth": 2,
  "useTabs": false
}
```

<div className="bg-green-50 border-l-4 border-green-500 p-4 my-4">
  <h3 className="text-green-800 font-bold">âœ¨ VS Code Extensions khuyáº¿n nghá»‹</h3>
  <ul className="text-green-700 mt-2">
    <li>â€¢ ES7+ React/Redux/React-Native snippets</li>
    <li>â€¢ Prettier - Code formatter</li>
    <li>â€¢ ESLint</li>
    <li>â€¢ TypeScript Importer</li>
    <li>â€¢ Tailwind CSS IntelliSense</li>
  </ul>
</div>

## 5. Package.json vÃ  Scripts

### 5.1 Scripts cÆ¡ báº£n

| Script | Lá»‡nh | MÃ´ táº£ |
|--------|------|-------|
| `dev` | `next dev` | Cháº¡y development server |
| `build` | `next build` | Build production |
| `start` | `next start` | Cháº¡y production server |
| `lint` | `next lint` | Kiá»ƒm tra code vá»›i ESLint |

### 5.2 Scripts nÃ¢ng cao

```json
{
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start",
    "lint": "next lint",
    "lint:fix": "next lint --fix",
    "type-check": "tsc --noEmit",
    "format": "prettier --write .",
    "clean": "rm -rf .next out"
  }
}
```

## 6. Cáº¥u hÃ¬nh Tailwind CSS

### 6.1 File tailwind.config.ts

```typescript
import type { Config } from 'tailwindcss'

const config: Config = {
  content: [
    './pages/**/*.{js,ts,jsx,tsx,mdx}',
    './components/**/*.{js,ts,jsx,tsx,mdx}',
    './app/**/*.{js,ts,jsx,tsx,mdx}',
  ],
  theme: {
    extend: {
      colors: {
        background: 'var(--background)',
        foreground: 'var(--foreground)',
      },
    },
  },
  plugins: [],
}
export default config
```

### 6.2 TÃ¹y chá»‰nh Tailwind

| Pháº§n | MÃ´ táº£ | VÃ­ dá»¥ |
|------|-------|--------|
| `colors` | MÃ u sáº¯c tÃ¹y chá»‰nh | `primary: '#1234ff'` |
| `spacing` | Khoáº£ng cÃ¡ch | `'72': '18rem'` |
| `fontFamily` | Font chá»¯ | `sans: ['Inter', 'sans-serif']` |
| `screens` | Responsive breakpoints | `'2xl': '1536px'` |

## 7. Environment Variables

### 7.1 File .env.local

```env
# Database
DATABASE_URL="postgresql://..."

# Authentication
NEXTAUTH_SECRET="your-secret-key"
NEXTAUTH_URL="http://localhost:3000"

# API Keys (public - cÃ³ prefix NEXT_PUBLIC_)
NEXT_PUBLIC_API_URL="https://api.example.com"
```

### 7.2 Quy táº¯c Environment Variables

```mermaid
flowchart TD
    A[Environment Variable] --> B{CÃ³ prefix NEXT_PUBLIC_?}
    B -->|CÃ³| C[Client-side accessible]
    B -->|KhÃ´ng| D[Server-side only]
    
    C --> E[CÃ³ thá»ƒ dÃ¹ng trong components]
    D --> F[Chá»‰ dÃ¹ng trong API routes, Server Components]
```

<div className="bg-red-50 border-l-4 border-red-500 p-4 my-4">
  <p className="text-red-800"><strong>âš ï¸ Báº£o máº­t:</strong> KhÃ´ng bao giá» Ä‘áº·t sensitive data (API keys, passwords) vá»›i prefix NEXT_PUBLIC_</p>
</div>

## 8. Thá»±c hÃ nh: Táº¡o dá»± Ã¡n Ä‘áº§u tiÃªn

### BÆ°á»›c 1: Khá»Ÿi táº¡o dá»± Ã¡n

```bash
npx create-next-app@latest my-blog-app \
  --typescript \
  --tailwind \
  --eslint \
  --app \
  --import-alias "@/*"
```

### BÆ°á»›c 2: KhÃ¡m phÃ¡ cáº¥u trÃºc

1. Má»Ÿ thÆ° má»¥c dá»± Ã¡n trong VS Code
2. Cháº¡y `npm run dev` Ä‘á»ƒ start development server
3. Má»Ÿ http://localhost:3000 trong browser
4. KhÃ¡m phÃ¡ file `app/page.tsx` vÃ  `app/layout.tsx`

### BÆ°á»›c 3: TÃ¹y chá»‰nh cÆ¡ báº£n

```typescript
// app/page.tsx
export default function Home() {
  return (
    <main className="container mx-auto px-4 py-8">
      <h1 className="text-4xl font-bold text-center mb-8">
        My Blog App
      </h1>
      <p className="text-lg text-gray-600 text-center">
        ChÃ o má»«ng Ä‘áº¿n vá»›i blog cá»§a tÃ´i!
      </p>
    </main>
  )
}
```

## 9. Troubleshooting thÆ°á»ng gáº·p

| Lá»—i | NguyÃªn nhÃ¢n | Giáº£i phÃ¡p |
|-----|-------------|-----------|
| `ENOENT: no such file` | Thiáº¿u dependency | Cháº¡y `npm install` |
| Port 3000 already in use | Port Ä‘ang Ä‘Æ°á»£c sá»­ dá»¥ng | DÃ¹ng `npm run dev -- -p 3001` |
| TypeScript errors | Cáº¥u hÃ¬nh sai | Kiá»ƒm tra `tsconfig.json` |
| Tailwind khÃ´ng hoáº¡t Ä‘á»™ng | Cáº¥u hÃ¬nh content path sai | Kiá»ƒm tra `tailwind.config.ts` |

<div className="bg-blue-50 border-l-4 border-blue-500 p-4 my-6">
  <h2 className="text-xl font-bold text-blue-800 mb-2">ğŸ“ TÃ³m táº¯t bÃ i há»c</h2>
  <ul className="text-blue-700 space-y-1">
    <li>â€¢ ThÃ nh tháº¡o sá»­ dá»¥ng create-next-app vá»›i cÃ¡c options</li>
    <li>â€¢ Hiá»ƒu rÃµ cáº¥u trÃºc thÆ° má»¥c Next.js App Router</li>
    <li>â€¢ Cáº¥u hÃ¬nh TypeScript, ESLint vÃ  Prettier</li>
    <li>â€¢ Thiáº¿t láº­p Tailwind CSS vÃ  environment variables</li>
    <li>â€¢ Kháº¯c phá»¥c cÃ¡c lá»—i thÆ°á»ng gáº·p</li>
  </ul>
</div>

---

<div className="text-center py-4">
  <p className="text-gray-500">BÃ i tiáº¿p theo: <strong>BÃ i 5 - Next.js App Router: Routing Basics</strong></p>
</div>