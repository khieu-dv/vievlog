---
title: "Trie (CÃ¢y Tiá»n Tá»‘)"
postId: "20631ez34tld1ce"
category: "Data Structures"
created: "19/8/2025"
updated: "27/8/2025"
---

# Trie (CÃ¢y Tiá»n Tá»‘)


## ğŸ¯ Má»¥c tiÃªu bÃ i há»c

Sau khi hoÃ n thÃ nh bÃ i há»c nÃ y, báº¡n sáº½:

- **Hiá»ƒu báº£n cháº¥t cá»§a Trie**: Náº¯m vá»¯ng cáº¥u trÃºc dá»¯ liá»‡u dáº¡ng cÃ¢y lÆ°u trá»¯ chuá»—i theo tiá»n tá»‘, cÃ¡ch thá»©c hoáº¡t Ä‘á»™ng vÃ  táº¡i sao nÃ³ hiá»‡u quáº£ cho viá»‡c tÃ¬m kiáº¿m chuá»—i
- **ThÃ nh tháº¡o cÃ¡c thao tÃ¡c cÆ¡ báº£n**: Triá»ƒn khai chÃ­nh xÃ¡c cÃ¡c phÆ°Æ¡ng thá»©c insert, search, delete vÃ  cÃ¡c thao tÃ¡c liÃªn quan Ä‘áº¿n tiá»n tá»‘
- **Tá»‘i Æ°u hÃ³a bá»™ nhá»› vÃ  hiá»‡u suáº¥t**: Hiá»ƒu cÃ¡ch Trie tiáº¿t kiá»‡m khÃ´ng gian nhá» chia sáº» tiá»n tá»‘ chung vÃ  tá»‘i Æ°u thá»i gian tÃ¬m kiáº¿m O(m) vá»›i m lÃ  Ä‘á»™ dÃ i chuá»—i
- **á»¨ng dá»¥ng thá»±c táº¿**: XÃ¢y dá»±ng Ä‘Æ°á»£c há»‡ thá»‘ng autocomplete, kiá»ƒm tra chÃ­nh táº£, vÃ  cÃ¡c tÃ­nh nÄƒng tÃ¬m kiáº¿m thÃ´ng minh
- **PhÃ¢n tÃ­ch Ä‘á»™ phá»©c táº¡p**: So sÃ¡nh hiá»‡u suáº¥t Trie vá»›i Hash Table vÃ  Binary Search Tree trong cÃ¡c tÃ¬nh huá»‘ng khÃ¡c nhau

## ğŸ“ Ná»™i dung chi tiáº¿t

### Trie lÃ  gÃ¬?

Trie (phÃ¡t Ã¢m lÃ  "try") hay Prefix Tree lÃ  cáº¥u trÃºc dá»¯ liá»‡u dáº¡ng cÃ¢y Ä‘Æ°á»£c thiáº¿t káº¿ Ä‘áº·c biá»‡t Ä‘á»ƒ lÆ°u trá»¯ vÃ  tÃ¬m kiáº¿m chuá»—i hiá»‡u quáº£. Má»—i nÃºt trong cÃ¢y Ä‘áº¡i diá»‡n cho má»™t kÃ½ tá»±, vÃ  Ä‘Æ°á»ng Ä‘i tá»« gá»‘c Ä‘áº¿n má»™t nÃºt táº¡o thÃ nh tiá»n tá»‘ cá»§a cÃ¡c chuá»—i Ä‘Æ°á»£c lÆ°u trá»¯.

![Trie](https://www.vievlog.com/dsa/images/trie.jpg)

**Äáº·c Ä‘iá»ƒm ná»•i báº­t:**
- **Prefix sharing**: CÃ¡c chuá»—i cÃ³ chung tiá»n tá»‘ sáº½ chia sáº» cÃ¹ng má»™t Ä‘Æ°á»ng Ä‘i tá»« gá»‘c
- **Fast prefix operations**: TÃ¬m kiáº¿m theo tiá»n tá»‘ cÃ³ Ä‘á»™ phá»©c táº¡p O(p) vá»›i p lÃ  Ä‘á»™ dÃ i tiá»n tá»‘
- **Memory efficient**: Tiáº¿t kiá»‡m bá»™ nhá»› khi cÃ³ nhiá»u chuá»—i cÃ³ tiá»n tá»‘ chung
- **Deterministic search**: Thá»i gian tÃ¬m kiáº¿m chá»‰ phá»¥ thuá»™c vÃ o Ä‘á»™ dÃ i chuá»—i, khÃ´ng phá»¥ thuá»™c vÃ o sá»‘ lÆ°á»£ng chuá»—i

### Cáº¥u trÃºc TrieNode

```javascript
import HashTable from '../hash-table/HashTable';

export default class TrieNode {
  constructor(character, isCompleteWord = false) {
    this.character = character;           // KÃ½ tá»± cá»§a nÃºt hiá»‡n táº¡i
    this.isCompleteWord = isCompleteWord; // ÄÃ¡nh dáº¥u káº¿t thÃºc má»™t tá»« hoÃ n chá»‰nh
    this.children = new HashTable();      // LÆ°u trá»¯ cÃ¡c nÃºt con
  }

  // Láº¥y nÃºt con theo kÃ½ tá»±
  getChild(character) {
    return this.children.get(character);
  }

  // ThÃªm nÃºt con má»›i
  addChild(character, isCompleteWord = false) {
    if (!this.children.has(character)) {
      this.children.set(character, new TrieNode(character, isCompleteWord));
    }

    const childNode = this.children.get(character);
    // Cáº­p nháº­t tráº¡ng thÃ¡i tá»« hoÃ n chá»‰nh (cho trÆ°á»ng há»£p "car" vÃ  "cars")
    childNode.isCompleteWord = childNode.isCompleteWord || isCompleteWord;
    
    return childNode;
  }

  // XÃ³a nÃºt con (chá»‰ khi an toÃ n)
  removeChild(character) {
    const childNode = this.getChild(character);
    
    // Chá»‰ xÃ³a khi nÃºt con khÃ´ng cÃ³ con vÃ  khÃ´ng pháº£i tá»« hoÃ n chá»‰nh
    if (childNode && !childNode.isCompleteWord && !childNode.hasChildren()) {
      this.children.delete(character);
    }
    
    return this;
  }

  // Kiá»ƒm tra tá»“n táº¡i nÃºt con
  hasChild(character) {
    return this.children.has(character);
  }

  // Kiá»ƒm tra cÃ³ nÃºt con nÃ o khÃ´ng
  hasChildren() {
    return this.children.getKeys().length !== 0;
  }

  // Láº¥y danh sÃ¡ch kÃ½ tá»± cá»§a cÃ¡c nÃºt con
  suggestChildren() {
    return [...this.children.getKeys()];
  }

  toString() {
    let childrenAsString = this.suggestChildren().toString();
    childrenAsString = childrenAsString ? `:${childrenAsString}` : '';
    const isCompleteString = this.isCompleteWord ? '*' : '';
    return `${this.character}${isCompleteString}${childrenAsString}`;
  }
}
```

### Triá»ƒn khai Trie chÃ­nh

```javascript
import TrieNode from './TrieNode';

const HEAD_CHARACTER = '*';

export default class Trie {
  constructor() {
    this.head = new TrieNode(HEAD_CHARACTER);
  }

  // ThÃªm tá»« vÃ o Trie
  addWord(word) {
    const characters = Array.from(word);
    let currentNode = this.head;

    for (let charIndex = 0; charIndex < characters.length; charIndex++) {
      const isComplete = charIndex === characters.length - 1;
      currentNode = currentNode.addChild(characters[charIndex], isComplete);
    }

    return this;
  }

  // XÃ³a tá»« khá»i Trie (sá»­ dá»¥ng depth-first approach)
  deleteWord(word) {
    const depthFirstDelete = (currentNode, charIndex = 0) => {
      if (charIndex >= word.length) {
        return;
      }

      const character = word[charIndex];
      const nextNode = currentNode.getChild(character);

      if (nextNode == null) {
        return; // Tá»« khÃ´ng tá»“n táº¡i trong Trie
      }

      // Äá»‡ quy xuá»‘ng level sÃ¢u hÆ¡n
      depthFirstDelete(nextNode, charIndex + 1);

      // Khi quay láº¡i, bá» Ä‘Ã¡nh dáº¥u tá»« hoÃ n chá»‰nh náº¿u Ä‘Ã¢y lÃ  kÃ½ tá»± cuá»‘i
      if (charIndex === (word.length - 1)) {
        nextNode.isCompleteWord = false;
      }

      // Thá»­ xÃ³a nÃºt con náº¿u cÃ³ thá»ƒ
      currentNode.removeChild(character);
    };

    depthFirstDelete(this.head);
    return this;
  }

  // Kiá»ƒm tra tá»« cÃ³ tá»“n táº¡i khÃ´ng
  doesWordExist(word) {
    const lastCharacter = this.getLastCharacterNode(word);
    return !!lastCharacter && lastCharacter.isCompleteWord;
  }

  // Láº¥y nÃºt kÃ½ tá»± cuá»‘i cÃ¹ng cá»§a tá»«
  getLastCharacterNode(word) {
    const characters = Array.from(word);
    let currentNode = this.head;

    for (let charIndex = 0; charIndex < characters.length; charIndex++) {
      if (!currentNode.hasChild(characters[charIndex])) {
        return null;
      }
      currentNode = currentNode.getChild(characters[charIndex]);
    }

    return currentNode;
  }

  // Gá»£i Ã½ kÃ½ tá»± tiáº¿p theo cÃ³ thá»ƒ cÃ³
  suggestNextCharacters(word) {
    const lastCharacter = this.getLastCharacterNode(word);
    
    if (!lastCharacter) {
      return null;
    }

    return lastCharacter.suggestChildren();
  }

  // TÃ¬m táº¥t cáº£ tá»« cÃ³ tiá»n tá»‘ cho trÆ°á»›c
  findWordsWithPrefix(prefix) {
    const prefixNode = this.getLastCharacterNode(prefix);
    if (!prefixNode) {
      return [];
    }

    const words = [];
    this.collectWords(prefixNode, prefix, words);
    return words;
  }

  // Thu tháº­p táº¥t cáº£ tá»« tá»« má»™t nÃºt (sá»­ dá»¥ng DFS)
  collectWords(node, currentWord, words) {
    if (node.isCompleteWord) {
      words.push(currentWord);
    }

    const children = node.suggestChildren();
    for (let child of children) {
      const childNode = node.getChild(child);
      this.collectWords(childNode, currentWord + child, words);
    }
  }
}
```

### VÃ­ dá»¥ sá»­ dá»¥ng cÆ¡ báº£n

```javascript
const trie = new Trie();

// ThÃªm tá»«
const words = ['cat', 'car', 'card', 'care', 'careful', 'cars'];
words.forEach(word => trie.addWord(word));

// Kiá»ƒm tra tá»« tá»“n táº¡i
console.log(trie.doesWordExist('car'));      // true
console.log(trie.doesWordExist('care'));     // true  
console.log(trie.doesWordExist('careful'));  // true
console.log(trie.doesWordExist('ca'));       // false

// TÃ¬m tá»« theo tiá»n tá»‘
console.log(trie.findWordsWithPrefix('car'));
// Output: ['car', 'card', 'care', 'careful', 'cars']

// Gá»£i Ã½ kÃ½ tá»± tiáº¿p theo
console.log(trie.suggestNextCharacters('ca'));
// Output: ['r', 't']
```

### PhÃ¢n tÃ­ch Ä‘á»™ phá»©c táº¡p

| Thao tÃ¡c | Äá»™ phá»©c táº¡p thá»i gian | Äá»™ phá»©c táº¡p khÃ´ng gian |
|----------|----------------------|----------------------|
| Insert | O(m) | O(m) |
| Search | O(m) | O(1) |
| Delete | O(m) | O(1) |
| Prefix Search | O(p + k) | O(k) |
| Autocomplete | O(p + k) | O(k) |

*Trong Ä‘Ã³: m = Ä‘á»™ dÃ i tá»«, p = Ä‘á»™ dÃ i tiá»n tá»‘, k = sá»‘ káº¿t quáº£ tráº£ vá»*

## ğŸ† BÃ i táº­p thá»±c hÃ nh

### BÃ i táº­p 1: Há»‡ thá»‘ng tá»± Ä‘á»™ng hoÃ n thÃ nh tÃ¬m kiáº¿m

**Äá» bÃ i**: XÃ¢y dá»±ng há»‡ thá»‘ng tá»± Ä‘á»™ng hoÃ n thÃ nh cho má»™t trang web thÆ°Æ¡ng máº¡i Ä‘iá»‡n tá»­. Há»‡ thá»‘ng cáº§n há»— trá»£:
- ThÃªm sáº£n pháº©m vÃ o cÆ¡ sá»Ÿ dá»¯ liá»‡u tÃ¬m kiáº¿m
- Gá»£i Ã½ tá»± Ä‘á»™ng hoÃ n thÃ nh dá»±a trÃªn Ä‘á»™ phá»• biáº¿n
- Theo dÃµi táº§n suáº¥t tÃ¬m kiáº¿m Ä‘á»ƒ cáº£i thiá»‡n gá»£i Ã½

**PhÃ¢n tÃ­ch bÃ i toÃ¡n**:
- Sá»­ dá»¥ng Trie Ä‘á»ƒ lÆ°u trá»¯ tÃªn sáº£n pháº©m vÃ  tÃ¬m kiáº¿m theo tiá»n tá»‘
- Káº¿t há»£p vá»›i Map Ä‘á»ƒ lÆ°u trá»¯ Ä‘iá»ƒm sá»‘ popularity
- Sáº¯p xáº¿p káº¿t quáº£ theo Ä‘á»™ phá»• biáº¿n

**Lá»i giáº£i chi tiáº¿t**:

```javascript
class AutocompleteSystem {
  constructor() {
    this.trie = new Trie();
    this.popularityScores = new Map(); // LÆ°u Ä‘iá»ƒm phá»• biáº¿n
    this.searchHistory = new Map();    // LÆ°u lá»‹ch sá»­ tÃ¬m kiáº¿m
  }

  // ThÃªm sáº£n pháº©m vá»›i Ä‘iá»ƒm phá»• biáº¿n ban Ä‘áº§u
  addProduct(productName, initialPopularity = 0) {
    this.trie.addWord(productName.toLowerCase());
    this.popularityScores.set(productName.toLowerCase(), initialPopularity);
    console.log(`âœ… ÄÃ£ thÃªm sáº£n pháº©m: "${productName}" vá»›i Ä‘iá»ƒm phá»• biáº¿n: ${initialPopularity}`);
  }

  // Ghi nháº­n lÆ°á»£t tÃ¬m kiáº¿m
  recordSearch(query) {
    const lowerQuery = query.toLowerCase();
    
    // TÄƒng sá»‘ láº§n tÃ¬m kiáº¿m
    const searchCount = this.searchHistory.get(lowerQuery) || 0;
    this.searchHistory.set(lowerQuery, searchCount + 1);
    
    // TÄƒng Ä‘iá»ƒm phá»• biáº¿n náº¿u lÃ  sáº£n pháº©m cÃ³ tháº­t
    if (this.trie.doesWordExist(lowerQuery)) {
      const currentScore = this.popularityScores.get(lowerQuery) || 0;
      this.popularityScores.set(lowerQuery, currentScore + 10);
    }
    
    console.log(`ğŸ” Ghi nháº­n tÃ¬m kiáº¿m: "${query}"`);
  }

  // Láº¥y gá»£i Ã½ tá»± Ä‘á»™ng hoÃ n thÃ nh
  getAutocompleteSuggestions(prefix, limit = 5) {
    const lowerPrefix = prefix.toLowerCase();
    
    // TÃ¬m táº¥t cáº£ sáº£n pháº©m cÃ³ tiá»n tá»‘ phÃ¹ há»£p
    const matchingProducts = this.trie.findWordsWithPrefix(lowerPrefix);
    
    if (matchingProducts.length === 0) {
      return {
        suggestions: [],
        message: `KhÃ´ng tÃ¬m tháº¥y sáº£n pháº©m nÃ o báº¯t Ä‘áº§u vá»›i "${prefix}"`
      };
    }

    // Sáº¯p xáº¿p theo Ä‘iá»ƒm phá»• biáº¿n vÃ  giá»›i háº¡n sá»‘ lÆ°á»£ng
    const sortedSuggestions = matchingProducts
      .map(product => ({
        name: product,
        popularity: this.popularityScores.get(product) || 0,
        searchCount: this.searchHistory.get(product) || 0
      }))
      .sort((a, b) => b.popularity - a.popularity)
      .slice(0, limit);

    return {
      suggestions: sortedSuggestions,
      totalMatches: matchingProducts.length,
      message: `TÃ¬m tháº¥y ${matchingProducts.length} sáº£n pháº©m phÃ¹ há»£p`
    };
  }

  // PhÃ¢n tÃ­ch thá»‘ng kÃª tÃ¬m kiáº¿m
  getSearchAnalytics() {
    const topSearches = Array.from(this.searchHistory.entries())
      .sort(([,a], [,b]) => b - a)
      .slice(0, 10)
      .map(([query, count]) => ({ query, count }));

    const topProducts = Array.from(this.popularityScores.entries())
      .sort(([,a], [,b]) => b - a)
      .slice(0, 10)
      .map(([product, score]) => ({ product, score }));

    return {
      topSearches,
      topProducts,
      totalSearches: Array.from(this.searchHistory.values()).reduce((a, b) => a + b, 0)
    };
  }
}

// Sá»­ dá»¥ng há»‡ thá»‘ng
const autocomplete = new AutocompleteSystem();

// ThÃªm dá»¯ liá»‡u sáº£n pháº©m
const products = [
  { name: 'iPhone 15 Pro Max', popularity: 95 },
  { name: 'iPhone 15 Pro', popularity: 90 },
  { name: 'iPhone 15', popularity: 85 },
  { name: 'iPad Pro', popularity: 80 },
  { name: 'iPad Air', popularity: 75 },
  { name: 'MacBook Pro', popularity: 88 },
  { name: 'MacBook Air', popularity: 83 },
  { name: 'AirPods Pro', popularity: 92 },
  { name: 'AirPods Max', popularity: 70 },
  { name: 'Apple Watch', popularity: 85 }
];

products.forEach(product => {
  autocomplete.addProduct(product.name, product.popularity);
});

// MÃ´ phá»ng ngÆ°á»i dÃ¹ng tÃ¬m kiáº¿m
console.log('\n=== DEMO TÃŒM KIáº¾M ===');

// Test 1: TÃ¬m kiáº¿m iPhone
console.log('\n1. TÃ¬m kiáº¿m "iph":');
let result = autocomplete.getAutocompleteSuggestions('iph');
console.log(result.message);
result.suggestions.forEach((item, index) => {
  console.log(`  ${index + 1}. ${item.name} (Äiá»ƒm: ${item.popularity})`);
});

// Test 2: Ghi nháº­n lÆ°á»£t tÃ¬m kiáº¿m
autocomplete.recordSearch('iPhone 15');
autocomplete.recordSearch('iPhone 15');
autocomplete.recordSearch('iPhone 15 Pro');

console.log('\n2. TÃ¬m kiáº¿m "iphone" sau khi ghi nháº­n lÆ°á»£t tÃ¬m:');
result = autocomplete.getAutocompleteSuggestions('iphone');
result.suggestions.forEach((item, index) => {
  console.log(`  ${index + 1}. ${item.name} (Äiá»ƒm: ${item.popularity}, LÆ°á»£t tÃ¬m: ${item.searchCount})`);
});

// Test 3: Thá»‘ng kÃª
console.log('\n3. Thá»‘ng kÃª tÃ¬m kiáº¿m:');
const analytics = autocomplete.getSearchAnalytics();
console.log(`Tá»•ng lÆ°á»£t tÃ¬m kiáº¿m: ${analytics.totalSearches}`);
console.log('Top 5 sáº£n pháº©m phá»• biáº¿n nháº¥t:');
analytics.topProducts.slice(0, 5).forEach((item, index) => {
  console.log(`  ${index + 1}. ${item.product} (${item.score} Ä‘iá»ƒm)`);
});
```

### BÃ i táº­p 2: Há»‡ thá»‘ng kiá»ƒm tra vÃ  sá»­a lá»—i chÃ­nh táº£ thÃ´ng minh

**Äá» bÃ i**: PhÃ¡t triá»ƒn má»™t trÃ¬nh kiá»ƒm tra chÃ­nh táº£ cho á»©ng dá»¥ng soáº¡n tháº£o vÄƒn báº£n. Há»‡ thá»‘ng cáº§n:
- PhÃ¡t hiá»‡n tá»« sai chÃ­nh táº£
- Äá» xuáº¥t tá»« thay tháº¿ phÃ¹ há»£p
- Há»c tá»« ngÆ°á»i dÃ¹ng Ä‘á»ƒ cáº£i thiá»‡n Ä‘á»™ chÃ­nh xÃ¡c

**PhÃ¢n tÃ­ch bÃ i toÃ¡n**:
- Sá»­ dá»¥ng Trie Ä‘á»ƒ lÆ°u tá»« Ä‘iá»ƒn chuáº©n
- Ãp dá»¥ng thuáº­t toÃ¡n Edit Distance Ä‘á»ƒ tÃ¬m tá»« tÆ°Æ¡ng tá»±
- Há»‡ thá»‘ng há»c táº­p tá»« feedback cá»§a ngÆ°á»i dÃ¹ng

**Lá»i giáº£i chi tiáº¿t**:

```javascript
class SmartSpellChecker {
  constructor() {
    this.dictionary = new Trie();           // Tá»« Ä‘iá»ƒn chuáº©n
    this.userWords = new Trie();           // Tá»« ngÆ°á»i dÃ¹ng thÃªm
    this.corrections = new Map();          // LÆ°u cÃ¡c láº§n sá»­a lá»—i
    this.ignoreWords = new Set();          // Tá»« Ä‘Æ°á»£c bá» qua
  }

  // ThÃªm tá»« vÃ o tá»« Ä‘iá»ƒn chuáº©n
  addToDictionary(word) {
    this.dictionary.addWord(word.toLowerCase());
  }

  // ThÃªm nhiá»u tá»« vÃ o tá»« Ä‘iá»ƒn
  loadDictionary(words) {
    words.forEach(word => this.addToDictionary(word));
    console.log(`ğŸ“š ÄÃ£ táº£i ${words.length} tá»« vÃ o tá»« Ä‘iá»ƒn`);
  }

  // ThÃªm tá»« do ngÆ°á»i dÃ¹ng Ä‘á»‹nh nghÄ©a
  addUserWord(word) {
    this.userWords.addWord(word.toLowerCase());
    console.log(`â• ÄÃ£ thÃªm tá»« "${word}" vÃ o tá»« Ä‘iá»ƒn cÃ¡ nhÃ¢n`);
  }

  // Kiá»ƒm tra tá»« cÃ³ Ä‘Ãºng chÃ­nh táº£ khÃ´ng
  isWordCorrect(word) {
    const lowerWord = word.toLowerCase();
    return this.dictionary.doesWordExist(lowerWord) || 
           this.userWords.doesWordExist(lowerWord) ||
           this.ignoreWords.has(lowerWord);
  }

  // TÃ­nh khoáº£ng cÃ¡ch Levenshtein giá»¯a hai tá»«
  calculateEditDistance(word1, word2) {
    const len1 = word1.length;
    const len2 = word2.length;
    const matrix = Array(len1 + 1).fill().map(() => Array(len2 + 1).fill(0));

    // Khá»Ÿi táº¡o hÃ ng vÃ  cá»™t Ä‘áº§u
    for (let i = 0; i <= len1; i++) matrix[i][0] = i;
    for (let j = 0; j <= len2; j++) matrix[0][j] = j;

    // TÃ­nh toÃ¡n ma tráº­n
    for (let i = 1; i <= len1; i++) {
      for (let j = 1; j <= len2; j++) {
        if (word1[i-1] === word2[j-1]) {
          matrix[i][j] = matrix[i-1][j-1];
        } else {
          matrix[i][j] = Math.min(
            matrix[i-1][j] + 1,     // xÃ³a
            matrix[i][j-1] + 1,     // thÃªm
            matrix[i-1][j-1] + 1    // thay tháº¿
          );
        }
      }
    }

    return matrix[len1][len2];
  }

  // Äá» xuáº¥t tá»« thay tháº¿ cho tá»« sai
  getSuggestions(incorrectWord, maxSuggestions = 5) {
    const lowerWord = incorrectWord.toLowerCase();
    
    if (this.isWordCorrect(lowerWord)) {
      return [`"${incorrectWord}" Ä‘Ã£ Ä‘Ãºng chÃ­nh táº£`];
    }

    const suggestions = [];
    const maxDistance = Math.min(3, Math.ceil(lowerWord.length / 3));

    // Láº¥y táº¥t cáº£ tá»« trong tá»« Ä‘iá»ƒn Ä‘á»ƒ so sÃ¡nh
    const allWords = [
      ...this.getAllWordsFromTrie(this.dictionary),
      ...this.getAllWordsFromTrie(this.userWords)
    ];

    // TÃ­nh toÃ¡n Ä‘á»™ tÆ°Æ¡ng tá»± vÃ  sáº¯p xáº¿p
    for (const word of allWords) {
      const distance = this.calculateEditDistance(lowerWord, word);
      
      if (distance <= maxDistance && distance > 0) {
        suggestions.push({
          word,
          distance,
          similarity: 1 - (distance / Math.max(lowerWord.length, word.length))
        });
      }
    }

    // Sáº¯p xáº¿p theo Ä‘á»™ tÆ°Æ¡ng tá»± vÃ  giá»›i háº¡n sá»‘ lÆ°á»£ng
    return suggestions
      .sort((a, b) => b.similarity - a.similarity)
      .slice(0, maxSuggestions)
      .map(item => item.word);
  }

  // Láº¥y táº¥t cáº£ tá»« tá»« má»™t Trie
  getAllWordsFromTrie(trie) {
    const words = [];
    const collectAllWords = (node, currentWord) => {
      if (node.isCompleteWord) {
        words.push(currentWord);
      }
      
      const children = node.suggestChildren();
      for (const char of children) {
        const childNode = node.getChild(char);
        collectAllWords(childNode, currentWord + char);
      }
    };

    collectAllWords(trie.head, '');
    return words;
  }

  // Kiá»ƒm tra cáº£ vÄƒn báº£n
  checkText(text) {
    // TÃ¡ch tá»« vÃ  loáº¡i bá» dáº¥u cÃ¢u
    const words = text.toLowerCase()
      .replace(/[^\w\sÃ Ã¡áº£Ã£áº¡Äƒáº¯áº±áº³áºµáº·Ã¢áº¥áº§áº©áº«áº­Ã¨Ã©áº»áº½áº¹Ãªáº¿á»á»ƒá»…á»‡Ã¬Ã­á»‰Ä©á»‹Ã²Ã³á»Ãµá»Ã´á»‘á»“á»•á»—á»™Æ¡á»›á»á»Ÿá»¡á»£Ã¹Ãºá»§Å©á»¥Æ°á»©á»«á»­á»¯á»±á»³Ã½á»·á»¹á»µÄ‘]/gi, '')
      .split(/\s+/)
      .filter(word => word.length > 0);

    const errors = [];
    
    words.forEach((word, index) => {
      if (!this.isWordCorrect(word)) {
        const suggestions = this.getSuggestions(word, 3);
        errors.push({
          position: index,
          incorrectWord: word,
          suggestions: suggestions.slice(0, 3)
        });
      }
    });

    return {
      totalWords: words.length,
      errors: errors.length,
      errorDetails: errors,
      accuracy: ((words.length - errors.length) / words.length * 100).toFixed(1)
    };
  }

  // Ghi nháº­n sá»± sá»­a lá»—i cá»§a ngÆ°á»i dÃ¹ng (Ä‘á»ƒ há»c)
  recordCorrection(incorrectWord, correctWord) {
    const key = incorrectWord.toLowerCase();
    if (!this.corrections.has(key)) {
      this.corrections.set(key, []);
    }
    this.corrections.get(key).push(correctWord.toLowerCase());
    
    // Tá»± Ä‘á»™ng thÃªm tá»« Ä‘Ãºng vÃ o tá»« Ä‘iá»ƒn ngÆ°á»i dÃ¹ng
    this.addUserWord(correctWord);
    console.log(`ğŸ”„ ÄÃ£ ghi nháº­n: "${incorrectWord}" â†’ "${correctWord}"`);
  }

  // Bá» qua tá»« (khÃ´ng coi lÃ  lá»—i)
  ignoreWord(word) {
    this.ignoreWords.add(word.toLowerCase());
    console.log(`â­ï¸ ÄÃ£ bá» qua tá»«: "${word}"`);
  }

  // Thá»‘ng kÃª hiá»‡u suáº¥t
  getStatistics() {
    return {
      dictionaryWords: this.getAllWordsFromTrie(this.dictionary).length,
      userWords: this.getAllWordsFromTrie(this.userWords).length,
      ignoredWords: this.ignoreWords.size,
      corrections: this.corrections.size,
      totalWords: this.getAllWordsFromTrie(this.dictionary).length + 
                  this.getAllWordsFromTrie(this.userWords).length
    };
  }
}

// Demo há»‡ thá»‘ng kiá»ƒm tra chÃ­nh táº£
const spellChecker = new SmartSpellChecker();

// Táº£i tá»« Ä‘iá»ƒn cÆ¡ báº£n
const basicDictionary = [
  'javascript', 'python', 'programming', 'computer', 'algorithm',
  'function', 'variable', 'array', 'object', 'string',
  'number', 'boolean', 'null', 'undefined', 'console',
  'document', 'window', 'element', 'event', 'click',
  'hello', 'world', 'example', 'test', 'code', 'debug'
];

spellChecker.loadDictionary(basicDictionary);

// Test kiá»ƒm tra tá»«ng tá»«
console.log('\n=== TEST KIá»‚M TRA Tá»ªNG Tá»ª ===');
const testWords = ['javascript', 'javascrip', 'phyton', 'algortihm'];

testWords.forEach(word => {
  const isCorrect = spellChecker.isWordCorrect(word);
  console.log(`\n"${word}": ${isCorrect ? 'âœ… ÄÃºng' : 'âŒ Sai'}`);
  
  if (!isCorrect) {
    const suggestions = spellChecker.getSuggestions(word, 3);
    console.log(`  Gá»£i Ã½: ${suggestions.join(', ')}`);
  }
});

// Test kiá»ƒm tra vÄƒn báº£n
console.log('\n=== TEST KIá»‚M TRA VÄ‚N Báº¢N ===');
const sampleText = "I am lerning javascrip and phyton progaming. This is a simpl exampl of spel cheking.";

console.log(`VÄƒn báº£n gá»‘c: "${sampleText}"`);
const result = spellChecker.checkText(sampleText);

console.log(`\nKáº¿t quáº£ kiá»ƒm tra:`);
console.log(`- Tá»•ng sá»‘ tá»«: ${result.totalWords}`);
console.log(`- Sá»‘ lá»—i: ${result.errors}`);
console.log(`- Äá»™ chÃ­nh xÃ¡c: ${result.accuracy}%`);

if (result.errorDetails.length > 0) {
  console.log(`\nChi tiáº¿t lá»—i:`);
  result.errorDetails.forEach((error, index) => {
    console.log(`  ${index + 1}. "${error.incorrectWord}" â†’ Gá»£i Ã½: ${error.suggestions.join(', ')}`);
  });
}

// Test há»c tá»« ngÆ°á»i dÃ¹ng
console.log('\n=== TEST Há»ŒC Tá»ª NGÆ¯á»œI DÃ™NG ===');
spellChecker.recordCorrection('lerning', 'learning');
spellChecker.recordCorrection('progaming', 'programming');
spellChecker.addUserWord('TypeScript');

// Thá»‘ng kÃª
console.log('\n=== THá»NG KÃŠ Há»† THá»NG ===');
const stats = spellChecker.getStatistics();
console.log(`Tá»« Ä‘iá»ƒn chuáº©n: ${stats.dictionaryWords} tá»«`);
console.log(`Tá»« Ä‘iá»ƒn cÃ¡ nhÃ¢n: ${stats.userWords} tá»«`);
console.log(`Tá»« bá» qua: ${stats.ignoredWords} tá»«`);
console.log(`Láº§n sá»­a lá»—i: ${stats.corrections} láº§n`);
```

## ğŸ”‘ Nhá»¯ng Ä‘iá»ƒm quan trá»ng cáº§n lÆ°u Ã½

### 1. **Tá»‘i Æ°u bá»™ nhá»›**
- Trie cÃ³ thá»ƒ tá»‘n nhiá»u bá»™ nhá»› khi alphabet size lá»›n
- Sá»­ dá»¥ng Compressed Trie (Patricia Tree) cho dá»¯ liá»‡u thÆ°a
- CÃ¢n nháº¯c sá»­ dá»¥ng array thay vÃ¬ HashMap cho cÃ¡c báº£ng chá»¯ cÃ¡i nhá»

### 2. **Xá»­ lÃ½ kÃ½ tá»± Unicode**
- Vá»›i tiáº¿ng Viá»‡t, cáº§n xá»­ lÃ½ Ä‘Ãºng cÃ¡c kÃ½ tá»± cÃ³ dáº¥u
- Sá»­ dá»¥ng `Array.from()` thay vÃ¬ `split('')` Ä‘á»ƒ tÃ¡ch chuá»—i Unicode
- CÃ¢n nháº¯c normalize chuá»—i trÆ°á»›c khi xá»­ lÃ½

### 3. **Chiáº¿n lÆ°á»£c xÃ³a**
- XÃ³a trong Trie phá»©c táº¡p hÆ¡n thÃªm vÃ  tÃ¬m kiáº¿m
- Cáº§n Ä‘áº£m báº£o khÃ´ng xÃ³a nháº§m nÃºt Ä‘Æ°á»£c chia sáº»
- Sá»­ dá»¥ng thuáº­t toÃ¡n DFS Ä‘á»ƒ xÃ³a an toÃ n tá»« dÆ°á»›i lÃªn

### 4. **Cáº£i thiá»‡n hiá»‡u suáº¥t**
- Cache káº¿t quáº£ tÃ¬m kiáº¿m cho cÃ¡c truy váº¥n phá»• biáº¿n
- Sá»­ dá»¥ng lazy evaluation cho viá»‡c thu tháº­p tá»«
- CÃ¢n nháº¯c giá»›i háº¡n Ä‘á»™ sÃ¢u Ä‘á»ƒ trÃ¡nh stack overflow

### 5. **Lá»—i thÆ°á»ng gáº·p**
- QuÃªn Ä‘Ã¡nh dáº¥u `isCompleteWord = true` khi thÃªm tá»«
- KhÃ´ng kiá»ƒm tra null khi traverse tree
- Xá»­ lÃ½ khÃ´ng Ä‘Ãºng trÆ°á»ng há»£p tá»« rá»—ng
- So sÃ¡nh case-sensitive khi khÃ´ng mong muá»‘n

## ğŸ“ BÃ i táº­p vá» nhÃ 

### BÃ i táº­p 1: Há»‡ thá»‘ng URL Shortener vá»›i Trie

**YÃªu cáº§u**: XÃ¢y dá»±ng má»™t há»‡ thá»‘ng rÃºt gá»n URL sá»­ dá»¥ng Trie Ä‘á»ƒ:
- LÆ°u trá»¯ vÃ  tÃ¬m kiáº¿m cÃ¡c URL Ä‘Ã£ Ä‘Æ°á»£c rÃºt gá»n
- Táº¡o ra cÃ¡c short URL unique
- Há»— trá»£ tÃ­nh nÄƒng custom alias cho URL
- Theo dÃµi sá»‘ láº§n click cho má»—i URL
- TÃ¬m kiáº¿m URL theo domain hoáº·c keyword

**Gá»£i Ã½ ká»¹ thuáº­t**:
- Sá»­ dá»¥ng Trie Ä‘á»ƒ lÆ°u trá»¯ mapping giá»¯a short code vÃ  original URL
- Káº¿t há»£p vá»›i hash table Ä‘á»ƒ tÄƒng tá»‘c lookup
- Implement thuáº­t toÃ¡n táº¡o short code tá»± Ä‘á»™ng
- ThÃªm tÃ­nh nÄƒng analytics vÃ  reporting

### BÃ i táº­p 2: Game Tá»« Vá»±ng ThÃ´ng Minh

**YÃªu cáº§u**: PhÃ¡t triá»ƒn má»™t trÃ² chÆ¡i tá»« vá»±ng vá»›i cÃ¡c tÃ­nh nÄƒng:
- NgÆ°á»i chÆ¡i táº¡o tá»« báº±ng cÃ¡ch thÃªm tá»«ng kÃ½ tá»±
- Há»‡ thá»‘ng gá»£i Ã½ kÃ½ tá»± tiáº¿p theo cÃ³ thá»ƒ táº¡o thÃ nh tá»« há»£p lá»‡
- TÃ­nh Ä‘iá»ƒm dá»±a trÃªn Ä‘á»™ dÃ i vÃ  Ä‘á»™ hiáº¿m cá»§a tá»«
- Cháº¿ Ä‘á»™ thá»­ thÃ¡ch vá»›i thá»i gian giá»›i háº¡n
- Há»— trá»£ nhiá»u ngÃ´n ngá»¯ (tiáº¿ng Anh, tiáº¿ng Viá»‡t)
- LÆ°u trá»¯ high score vÃ  thá»‘ng kÃª ngÆ°á»i chÆ¡i

**Gá»£i Ã½ ká»¹ thuáº­t**:
- Sá»­ dá»¥ng multiple Tries cho cÃ¡c ngÃ´n ngá»¯ khÃ¡c nhau
- Implement scoring algorithm dá»±a trÃªn word frequency
- Táº¡o hint system thÃ´ng minh
- Thiáº¿t káº¿ game mechanics háº¥p dáº«n vá»›i power-ups

---

*Post ID: 20631ez34tld1ce*  
*Category: Data Structures*  
*Created: 19/8/2025*  
*Updated: 27/8/2025*
